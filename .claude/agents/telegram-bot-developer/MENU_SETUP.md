# üéØ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Telegram –±–æ—Ç–∞ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –º–µ–Ω—é

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–∞

**–í–ù–ò–ú–ê–ù–ò–ï:** –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ systemd —Å–µ—Ä–≤–∏—Å `grantservice-bot`, –∞ –Ω–µ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ Python!

```bash
# –ü—Ä–∞–≤–∏–ª—å–Ω–æ - —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å:
sudo systemctl start grantservice-bot
sudo systemctl status grantservice-bot

# –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ - –Ω–∞–ø—Ä—è–º—É—é:
python main.py  # –¢–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!
```

## üìã –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –±–æ—Ç–∞ –≤–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é —Å —Ç—Ä–µ–º—è —ç–∫—Ä–∞–Ω–∞–º–∏:

### **–≠–∫—Ä–∞–Ω 1 - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:**
- üìù **–ù–∞—á–∞—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ** ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ –≤–æ–ø—Ä–æ—Å–∞–º
- üí≥ **–û–ø–ª–∞—Ç–∞** ‚Üí —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å–µ—Ä–≤–∏—Å –æ–ø–ª–∞—Ç—ã  
- üìä **–°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏** ‚Üí –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚ÑπÔ∏è **–û –ì—Ä–∞–Ω—Ç—Å–µ—Ä–≤–∏—Å–µ** ‚Üí –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–∏—Å–µ

### **–≠–∫—Ä–∞–Ω 2 - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º:**
- ‚¨ÖÔ∏è **–ù–∞–∑–∞–¥** ‚Üí –ø—Ä–µ–¥—ã–¥—É—â–∏–π –≤–æ–ø—Ä–æ—Å
- **–í–ø–µ—Ä—ë–¥ ‚û°Ô∏è** ‚Üí —Å–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
- üè† **–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é** ‚Üí –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

### **–≠–∫—Ä–∞–Ω 3 - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞:**
- ‚úÖ **–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É** ‚Üí —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
- ‚¨ÖÔ∏è **–ù–∞–∑–∞–¥** ‚Üí –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É –≤–æ–ø—Ä–æ—Å—É
- üè† **–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é** ‚Üí –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –±–æ—Ç
```bash
cd /var/GrantService/telegram-bot
sudo systemctl stop grantservice-bot
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
```bash
cp main.py main_backup.py
```

### 3. –ó–∞–º–µ–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª
```bash
cp main_with_menu.py main.py
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
source venv/bin/activate
pip install python-telegram-bot requests
```

### 5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –í —Ñ–∞–π–ª–µ /var/GrantService/config/config.env
export TELEGRAM_BOT_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞"
export N8N_WEBHOOK_URL="http://localhost:5678/webhook/grant-service"
export GIGACHAT_API_KEY="–≤–∞—à_–∫–ª—é—á_gigachat"
```

### 6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
```bash
# –í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ systemd —Å–µ—Ä–≤–∏—Å –¥–ª—è –∑–∞–ø—É—Å–∫–∞!
sudo systemctl start grantservice-bot
sudo systemctl status grantservice-bot

# –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é:
cd /var/GrantService/telegram-bot
source venv/bin/activate
python main.py
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –ø–∞–ø–∫–µ telegram-bot
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
N8N_WEBHOOK_URL=http://localhost:5678/webhook/grant-service
GIGACHAT_API_KEY=–≤–∞—à_–∫–ª—é—á_gigachat
```

### Systemd —Å–µ—Ä–≤–∏—Å
```bash
# –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª /etc/systemd/system/grantservice-bot.service
[Unit]
Description=GrantService Telegram Bot with Menu
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/var/GrantService/telegram-bot
Environment=PATH=/var/GrantService/telegram-bot/venv/bin
ExecStart=/var/GrantService/telegram-bot/venv/bin/python main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞
```bash
cd /var/GrantService/telegram-bot
source venv/bin/activate
python main.py
```

### 2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /start –≤ Telegram
–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å 4 –∫–Ω–æ–ø–∫–∞–º–∏.

### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞–≤–∏–≥–∞—Ü–∏—é
- –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—Ç–≤–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —ç–∫—Ä–∞–Ω –æ—Ç–ø—Ä–∞–≤–∫–∏
–ü–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è —ç–∫—Ä–∞–Ω –ø—Ä–æ–≤–µ—Ä–∫–∏.

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `/var/GrantService/logs/telegram_bot.log`:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f /var/GrantService/logs/telegram_bot.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep "ERROR" /var/GrantService/logs/telegram_bot.log
```

## üîÑ –û—Ç–∫–∞—Ç –∫ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏:

```bash
cd /var/GrantService/telegram-bot
cp main_backup.py main.py
sudo systemctl restart grantservice-bot
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `main_menu` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `interviewing` - –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤  
- `review` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞

### –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –∏–∑ –ë–î
- –ü–æ–¥—Å—á–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å n8n
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–æ–∫ —á–µ—Ä–µ–∑ webhook
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ò–ò
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo systemctl status grantservice-bot

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω
echo $TELEGRAM_BOT_TOKEN

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
sudo systemctl restart grantservice-bot
```

### –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ—à–∏–±–æ–∫
tail -n 50 /var/GrantService/logs/telegram_bot.log | grep ERROR
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ë–î
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
cd /var/GrantService/data
python -c "from database import db; print('–ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç')"
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞—è–≤–æ–∫
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

---

**–ì–æ—Ç–æ–≤–æ!** üéâ –ë–æ—Ç —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –º–µ–Ω—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! 