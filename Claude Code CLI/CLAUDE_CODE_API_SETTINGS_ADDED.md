# Claude Code API –¥–æ–±–∞–≤–ª–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚úÖ

**–î–∞—Ç–∞**: 2025-10-08 12:02
**–°—Ç—Ä–∞–Ω–∏—Ü–∞**: `web-admin/pages/‚öôÔ∏è_–ù–∞—Å—Ç—Ä–æ–π–∫–∏.py`

---

## üìä –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### 1. –°—Ç–∞—Ç—É—Å Claude Code API –≤ —Ä–∞–∑–¥–µ–ª–µ "–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤"

**4 —Å–µ—Ä–≤–∏—Å–∞ —Ç–µ–ø–µ—Ä—å:**
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
- ‚úÖ **Claude Code API** ‚Üê –ù–û–í–û–ï
- üîÑ Telegram Bot
- üîÑ GigaChat API

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
```python
response = requests.get(f"{claude_base_url}/health", timeout=3)
if response.status_code == 200:
    st.success("‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω")
    st.caption("Sonnet 4.5 (–±–µ–∑–ª–∏–º–∏—Ç)")
```

**–ò–Ω–¥–∏–∫–∞—Ü–∏—è:**
- ‚úÖ –ó–µ–ª—ë–Ω—ã–π = –ø–æ–¥–∫–ª—é—á–µ–Ω
- ‚ùå –ö—Ä–∞—Å–Ω—ã–π = –æ—à–∏–±–∫–∞/–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- üîÑ –ñ—ë–ª—Ç—ã–π = –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ

---

### 2. –°–µ–∫—Ü–∏—è "Claude Code API (–û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å)"

**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:**
- **API URL**: `http://178.236.17.55:8000`
- **API Key**: `1f79b062...27aa0732` (–∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)
- **–ú–æ–¥–µ–ª—å**: Claude Sonnet 4.5 (200k –∫–æ–Ω—Ç–µ–∫—Å—Ç)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ê–∫—Ç–∏–≤–Ω–∞ / ‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- **–õ–∏–º–∏—Ç—ã**: –ë–µ–∑–ª–∏–º–∏—Ç–Ω–∞—è (–ø–æ –ø–æ–¥–ø–∏—Å–∫–µ)

**–ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π:**

1. **üîÑ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**
   - GET /health
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ/‚ùå

2. **üìä –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–¥–µ–ª–∏**
   - GET /models (—Å Authorization header)
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫: `Claude Sonnet 4.5 (sonnet), Claude Opus 4 (opus)`
   - –¢—Ä–µ–±—É–µ—Ç API –∫–ª—é—á –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

---

### 3. GigaChat –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ Fallback

**–ë—ã–ª–æ:**
```
üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ API
  ‚îú‚îÄ‚îÄ GigaChat API
  ‚îî‚îÄ‚îÄ Telegram Bot
```

**–°—Ç–∞–ª–æ:**
```
üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ API (Fallback)
  ‚îú‚îÄ‚îÄ GigaChat API (Fallback)
  ‚îÇ   ‚îî‚îÄ‚îÄ ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ Claude Code –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
  ‚îî‚îÄ‚îÄ Telegram Bot
```

---

## üîë –û—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –¥–∞–Ω–Ω—ã–µ

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (`.env`)
```bash
CLAUDE_CODE_API_KEY=1f79b062cf00b8d28546f5bd283dc59a1c6a7f9e9fe5a8e5ef25b0cc27aa0732
CLAUDE_CODE_BASE_URL=http://178.236.17.55:8000
CLAUDE_CODE_DEFAULT_MODEL=sonnet
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–¥–µ
```python
claude_api_key = os.getenv('CLAUDE_CODE_API_KEY', '1f79b062...')
claude_base_url = os.getenv('CLAUDE_CODE_BASE_URL', 'http://178.236.17.55:8000')
```

---

## üìà –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Claude Code

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Claude Code | GigaChat |
|----------|-------------|----------|
| **–ö–æ–Ω—Ç–µ–∫—Å—Ç** | 200k —Ç–æ–∫–µ–Ω–æ–≤ | 8k —Ç–æ–∫–µ–Ω–æ–≤ |
| **–õ–∏–º–∏—Ç—ã** | ‚úÖ –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–π (–ø–æ–¥–ø–∏—Å–∫–∞) | ‚ùå –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π |
| **–ö–∞—á–µ—Å—Ç–≤–æ** | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Sonnet 4.5 | ‚≠ê‚≠ê‚≠ê GigaChat |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | –ë—ã—Å—Ç—Ä–æ | –°—Ä–µ–¥–Ω–µ |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ | –ü–æ —Ç–æ–∫–µ–Ω–∞–º |

**–í—ã–≤–æ–¥**: Claude Code - –æ—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å, GigaChat - fallback –Ω–∞ —Å–ª—É—á–∞–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

---

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ `–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°–∏—Å—Ç–µ–º–∞`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å **Claude Code API**
3. –£–±–µ–¥–∏—Ç–µ—Å—å: ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω
4. –ù–∞–∂–º–∏—Ç–µ **üîÑ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –¥–ª—è —Ç–µ—Å—Ç–∞
5. –ù–∞–∂–º–∏—Ç–µ **üìä –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–¥–µ–ª–∏** —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫

### –í –∫–æ–¥–µ –∞–≥–µ–Ω—Ç–æ–≤

```python
import os

# –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
claude_api_key = os.getenv('CLAUDE_CODE_API_KEY')
claude_base_url = os.getenv('CLAUDE_CODE_BASE_URL')

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
from shared.llm.claude_code_client import ClaudeCodeClient

async with ClaudeCodeClient(api_key=claude_api_key, base_url=claude_base_url) as client:
    response = await client.chat("–û—Ü–µ–Ω–∏ —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç...")
```

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞—Å—Ç—Ä–æ–µ–∫
```bash
python launcher.py
# –û—Ç–∫—Ä–æ–µ—Ç—Å—è: http://localhost:8501
# –ü–µ—Ä–µ–π—Ç–∏: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°–∏—Å—Ç–µ–º–∞
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ Claude Code API –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å
- ‚úÖ API URL –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- ‚úÖ API Key –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ö–Ω–æ–ø–∫–∏ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ" –∏ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ–¥–µ–ª–∏" —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ GigaChat –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ Fallback

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É Telegram Bot** - –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ Claude Code
2. **–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É GigaChat** - GET /health
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ –ë–î** - —Ç–∞–±–ª–∏—Ü–∞ `system_settings`
4. **–ò—Å—Ç–æ—Ä–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API** - –ª–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Claude/GigaChat
5. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤** - —Å–∫–æ–ª—å–∫–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ –∑–∞ –¥–µ–Ω—å/–º–µ—Å—è—Ü

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
**–§–∞–π–ª**: `web-admin/pages/‚öôÔ∏è_–ù–∞—Å—Ç—Ä–æ–π–∫–∏.py:80-158`
