# Claude Code API - –†–µ–∑—é–º–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ GrantService

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚úÖ

**–î–æ–∫—É–º–µ–Ω—Ç:** [CLAUDE_CODE_INTEGRATION_ARCHITECTURE.md](CLAUDE_CODE_INTEGRATION_ARCHITECTURE.md)

- –ü—Ä–æ–≤–µ–¥—ë–Ω –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ Claude Code API Wrapper
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å GigaChat: –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω **–≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥** (GigaChat + Claude)
- –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ LLM Router
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–ª—è –≥—Ä–∞–Ω—Ç–æ–≤—ã—Ö –∑–∞–¥–∞—á

**–ö–ª—é—á–µ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –ù–µ –∑–∞–º–µ–Ω—è—Ç—å GigaChat, –∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ø–æ –∏—Ö —Å–∏–ª—å–Ω—ã–º —Å—Ç–æ—Ä–æ–Ω–∞–º.

### 2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è ‚úÖ

–°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã:

#### `shared/llm/claude_code_client.py`
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è Claude Code API
- –ú–µ—Ç–æ–¥—ã: `chat()`, `execute_code()`, `list_sessions()`, `delete_session()`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–µ—Å—Å–∏–π –¥–ª—è –¥–ª–∏–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

#### `shared/llm/llm_router.py`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ø–æ —Ç–∏–ø—É –∑–∞–¥–∞—á–∏
- 8 —Ç–∏–ø–æ–≤ –∑–∞–¥–∞—á: ANALYSIS, EVALUATION, GENERATION, CODE –∏ –¥—Ä.
- Fallback –º–µ—Ö–∞–Ω–∏–∑–º (Claude ‚Üí GigaChat –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç)
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- Health check –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

#### `agents/prompts/claude_code_prompts.py`
- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –≥—Ä–∞–Ω—Ç–æ–≤—ã—Ö –∑–∞–¥–∞—á
- Auditor: –æ—Ü–µ–Ω–∫–∞ –ø–æ 10 –∫—Ä–∏—Ç–µ—Ä–∏—è–º
- Planner: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏
- Researcher: –ø–æ–∏—Å–∫ –∞–Ω–∞–ª–æ–≥–æ–≤
- Code validation: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±—é–¥–∂–µ—Ç–æ–≤
- Interview analysis: –∞–Ω–∞–ª–∏–∑ –¥–∏–∞–ª–æ–≥–æ–≤

#### `shared/llm/config.py` (–æ–±–Ω–æ–≤–ª—ë–Ω)
- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Claude Code API
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤
- –ú–∞—Ç—Ä–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ

**–§–∞–π–ª:** `test_claude_code_integration.py`

–¢–µ—Å—Ç—ã:
1. ‚úÖ –ë–∞–∑–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç Claude Code (health, chat, code execution)
2. ‚úÖ LLM Router (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä, fallback)
3. ‚úÖ –ì—Ä–∞–Ω—Ç–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã (–æ—Ü–µ–Ω–∫–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ)

**–ó–∞–ø—É—Å–∫:**
```bash
python test_claude_code_integration.py
```

### 4. –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π Auditor Agent ‚úÖ

**–§–∞–π–ª:** `agents/auditor_agent_claude.py`

–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- –ë—ã—Å—Ç—Ä–∞—è –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (1-100 –±–∞–ª–ª–æ–≤)
- –ü–æ–ª–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –ø–æ 10 –∫—Ä–∏—Ç–µ—Ä–∏—è–º
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —É—Å–ø–µ—à–Ω—ã–º–∏ –≥—Ä–∞–Ω—Ç–∞–º–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞–Ω–∞ —É–ª—É—á—à–µ–Ω–∏—è
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

### 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚úÖ

- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** [CLAUDE_CODE_INTEGRATION_ARCHITECTURE.md](CLAUDE_CODE_INTEGRATION_ARCHITECTURE.md) (10 —Ä–∞–∑–¥–µ–ª–æ–≤, 350+ —Å—Ç—Ä–æ–∫)
- **Quick Start:** [CLAUDE_CODE_QUICK_START.md](CLAUDE_CODE_QUICK_START.md)
- **Summary:** [CLAUDE_CODE_INTEGRATION_SUMMARY.md](CLAUDE_CODE_INTEGRATION_SUMMARY.md) (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

### 6. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚úÖ

**–û–±–Ω–æ–≤–ª—ë–Ω:** `config/.env.example`

```bash
# Claude Code API Configuration
CLAUDE_CODE_API_KEY=1f79b062cf00b8d28546f5bd283dc59a1c6a7f9e9fe5a8e5ef25b0cc27aa0732
CLAUDE_CODE_BASE_URL=http://178.236.17.55:8000
CLAUDE_CODE_DEFAULT_MODEL=sonnet
```

---

## üéØ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á –º–µ–∂–¥—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏

### Claude Code ‚Üí –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

| –ê–≥–µ–Ω—Ç | –ó–∞–¥–∞—á–∞ | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ |
|-------|--------|--------------|
| **Auditor** | –û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø–æ 10 –∫—Ä–∏—Ç–µ—Ä–∏—è–º | –ì–ª—É–±–æ–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, –æ–±—ä–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |
| **Planner** | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ | –õ–æ–≥–∏—á–µ—Å–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ |
| **Researcher** | –ü–æ–∏—Å–∫ –∞–Ω–∞–ª–æ–≥–æ–≤ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ | –ê–Ω–∞–ª–∏–∑ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö |
| **Validator** | –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—é–¥–∂–µ—Ç–æ–≤ (–∫–æ–¥) | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞, 100% —Ç–æ—á–Ω–æ—Å—Ç—å |

### GigaChat ‚Üí –†—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç

| –ê–≥–µ–Ω—Ç | –ó–∞–¥–∞—á–∞ | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ |
|-------|--------|--------------|
| **Writer** | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –∑–∞—è–≤–∫–∏ | –û—Ç–ª–∏—á–Ω—ã–π —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ |
| **Interviewer** | –û–±—â–µ–Ω–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º | –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–∏–∞–ª–æ–≥ |
| **Translator** | –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è | –†—É—Å—Å–∫–∏–π —è–∑—ã–∫ |

---

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ö–∞—á–µ—Å—Ç–≤–æ
- **‚Üë 30-40%** —Ç–æ—á–Ω–æ—Å—Ç—å –æ—Ü–µ–Ω–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤
- **‚Üë 2x –∫–æ–Ω—Ç–µ–∫—Å—Ç** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (200K vs 8K —Ç–æ–∫–µ–Ω–æ–≤ Claude vs GigaChat)
- **‚Üë 20-25%** –∫–∞—á–µ—Å—Ç–≤–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- **100% —Ç–æ—á–Ω–æ—Å—Ç—å** –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –±—é–¥–∂–µ—Ç–∞ (code execution)
- **‚Üì 50% –æ—à–∏–±–æ–∫** –≤ –±—é–¥–∂–µ—Ç–∞—Ö
- **‚Üì 40% –≤—Ä–µ–º—è** –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫

### –ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å
- **Fallback –º–µ—Ö–∞–Ω–∏–∑–º** - –µ—Å–ª–∏ Claude –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí GigaChat
- **Health monitoring** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
- **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install aiohttp asyncio
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
python test_claude_code_integration.py
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```python
from shared.llm.llm_router import LLMRouter, TaskType

async def example():
    async with LLMRouter() as router:
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–µ—Ä–µ—Ç Claude –¥–ª—è –æ—Ü–µ–Ω–∫–∏
        evaluation = await router.generate(
            prompt="–û—Ü–µ–Ω–∏ –ø—Ä–æ–µ–∫—Ç –ø–æ 10 –∫—Ä–∏—Ç–µ—Ä–∏—è–º...",
            task_type=TaskType.EVALUATION,
            temperature=0.3
        )

        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–µ—Ä–µ—Ç GigaChat –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞
        text = await router.generate(
            prompt="–ù–∞–ø–∏—à–∏ –≤–≤–µ–¥–µ–Ω–∏–µ –∫ –∑–∞—è–≤–∫–µ...",
            task_type=TaskType.GENERATION,
            temperature=0.7
        )
```

---

## üìà –ü–ª–∞–Ω –¥–∞–ª—å–Ω–µ–π—à–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: MVP - Auditor Agent (2 –¥–Ω—è)
- [x] –°–æ–∑–¥–∞—Ç—å `auditor_agent_claude.py`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö
- [ ] –°—Ä–∞–≤–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Å GigaChat
- [ ] –°–æ–±—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏

### –≠—Ç–∞–ø 2: Code Execution (2 –¥–Ω—è)
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –±—é–¥–∂–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ `/code`
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- [ ] –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –æ—à–∏–±–æ–∫ –≤ –∞–¥–º–∏–Ω–∫–µ

### –≠—Ç–∞–ø 3: Session Management (3 –¥–Ω—è)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–µ—Å—Å–∏–π –≤ Telegram Bot
- [ ] –î–ª–∏–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –∏–Ω—Ç–µ—Ä–≤—å—é (24 –≤–æ–ø—Ä–æ—Å–∞)
- [ ] –§–∏–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—Å–µ–≥–æ –¥–∏–∞–ª–æ–≥–∞

### –≠—Ç–∞–ø 4: Researcher Agent (3 –¥–Ω—è)
- [ ] –ë–∞–∑–∞ —É—Å–ø–µ—à–Ω—ã—Ö –≥—Ä–∞–Ω—Ç–æ–≤
- [ ] –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- [ ] –ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —É—Å–ø–µ—Ö–∞

### –≠—Ç–∞–ø 5: Production (2 –¥–Ω—è)
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ PostgreSQL
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ Streamlit
- [ ] –ê–ª–µ—Ä—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

**–û–±—â–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 12 –¥–Ω–µ–π

---

## üîß –§–∞–π–ª—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é)

```
‚úÖ CLAUDE_CODE_INTEGRATION_ARCHITECTURE.md     # –ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
‚úÖ CLAUDE_CODE_QUICK_START.md                   # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–π)
‚úÖ CLAUDE_CODE_INTEGRATION_SUMMARY.md          # –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç

‚úÖ shared/llm/claude_code_client.py            # –ö–ª–∏–µ–Ω—Ç API
‚úÖ shared/llm/llm_router.py                    # –†–æ—É—Ç–µ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚úÖ shared/llm/config.py                        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–æ–±–Ω–æ–≤–ª—ë–Ω)

‚úÖ agents/prompts/claude_code_prompts.py       # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –≥—Ä–∞–Ω—Ç–æ–≤
‚úÖ agents/auditor_agent_claude.py              # –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π Auditor

‚úÖ test_claude_code_integration.py             # –¢–µ—Å—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

‚úÖ config/.env.example                         # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

### –§–∞–π–ª—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (—Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥)

```
‚è≥ agents/auditor_agent.py          # –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ auditor_agent_claude.py
‚è≥ agents/researcher_agent.py        # –î–æ–±–∞–≤–∏—Ç—å Claude –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
‚è≥ agents/planner_agent.py           # –°–æ–∑–¥–∞—Ç—å (–ø–æ–∫–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
‚è≥ telegram-bot/main.py              # –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å LLM Router
‚è≥ web-admin/pages/ü§ñ_–ê–≥–µ–Ω—Ç—ã.py      # –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Claude
```

---

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–æ–≤

**–§–∞–π–ª:** `shared/llm/config.py`

```python
AGENT_CONFIGS = {
    "interviewer": {
        "provider": "gigachat",  # –†—É—Å—Å–∫–∏–π —è–∑—ã–∫
        "model": "GigaChat",
        "temperature": 0.5
    },
    "auditor": {
        "provider": "claude",    # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
        "model": "sonnet",
        "temperature": 0.3
    },
    "writer": {
        "provider": "gigachat",  # –†—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç
        "model": "GigaChat",
        "temperature": 0.7
    },
    "planner": {
        "provider": "claude",    # –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
        "model": "sonnet",
        "temperature": 0.4
    },
    "researcher": {
        "provider": "claude",    # –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
        "model": "sonnet",
        "temperature": 0.3
    }
}
```

---

## üé¨ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```python
from agents.auditor_agent_claude import AuditorAgentClaude

agent = AuditorAgentClaude(db=db)

project = {
    "–Ω–∞–∑–≤–∞–Ω–∏–µ": "IT-—Ü–µ–Ω—Ç—Ä –¥–ª—è –º–æ–ª–æ–¥—ë–∂–∏",
    "–æ–ø–∏—Å–∞–Ω–∏–µ": "–û–±—É—á–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é –≤ –º–∞–ª—ã—Ö –≥–æ—Ä–æ–¥–∞—Ö",
    "–±—é–¥–∂–µ—Ç": 1500000
}

# –ü–æ–ª–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
result = await agent.evaluate_project_async(project)
print(f"–û—Ü–µ–Ω–∫–∞: {result['total_score']}/100")
print(f"–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: {result['recommendation']}")
```

### –ü—Ä–∏–º–µ—Ä 2: –í–∞–ª–∏–¥–∞—Ü–∏—è –±—é–¥–∂–µ—Ç–∞

```python
from shared.llm.llm_router import LLMRouter
from agents.prompts.claude_code_prompts import generate_budget_validation_code

async with LLMRouter() as router:
    code = generate_budget_validation_code(budget_data)
    result = await router.execute_code(code, language="python")

    validation = json.loads(result['result'])
    if not validation['valid']:
        print("–û—à–∏–±–∫–∏ –≤ –±—é–¥–∂–µ—Ç–µ:")
        for error in validation['errors']:
            print(f"- {error['message']}")
```

### –ü—Ä–∏–º–µ—Ä 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

```python
from shared.llm.llm_router import LLMRouter, TaskType

async with LLMRouter() as router:
    # Claude –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
    analysis = await router.generate(
        prompt="–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–æ–µ–∫—Ç...",
        task_type=TaskType.ANALYSIS
    )

    # GigaChat –¥–ª—è —Ç–µ–∫—Å—Ç–∞
    text = await router.generate(
        prompt="–ù–∞–ø–∏—à–∏ –≤–≤–µ–¥–µ–Ω–∏–µ...",
        task_type=TaskType.GENERATION
    )
```

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Claude API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:** LLM Router –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ GigaChat

```python
# Fallback –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
response = await router.generate(
    prompt="...",
    task_type=TaskType.ANALYSIS  # Claude ‚Üí GigaChat fallback
)
```

### –ü—Ä–æ–±–ª–µ–º–∞: JSON –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

```python
try:
    data = json.loads(response)
except json.JSONDecodeError:
    # –¢–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç
    print(f"–û—Ç–≤–µ—Ç: {response}")
```

### –ü—Ä–æ–±–ª–µ–º–∞: Timeout

**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á–∏—Ç—å timeout –≤ config

```python
ASYNC_REQUEST_TIMEOUT = 180  # 3 –º–∏–Ω—É—Ç—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### KPI –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

1. **–¢–æ—á–Ω–æ—Å—Ç—å –æ—Ü–µ–Ω–æ–∫:**
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–º–∏ –æ—Ü–µ–Ω–∫–∞–º–∏
   - –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å –æ–¥–æ–±—Ä–µ–Ω–∏–µ–º –≥—Ä–∞–Ω—Ç–æ–≤
   - –¶–µ–ª—å: >85% —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ

2. **–ö–∞—á–µ—Å—Ç–≤–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:**
   - –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (NPS)
   - –ü—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å —Å–æ–≤–µ—Ç–æ–≤
   - –¶–µ–ª—å: NPS >70

3. **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å:**
   - Uptime –æ–±–æ–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
   - –£—Å–ø–µ—à–Ω–æ—Å—Ç—å fallback
   - –¶–µ–ª—å: 99.5% –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
   - –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
   - –¶–µ–ª—å: <5 —Å–µ–∫ –Ω–∞ –∑–∞–ø—Ä–æ—Å

---

## ‚úÖ Checklist –¥–ª—è –¥–µ–ø–ª–æ—è

- [x] –°–æ–∑–¥–∞–Ω Claude Code –∫–ª–∏–µ–Ω—Ç
- [x] –°–æ–∑–¥–∞–Ω LLM Router
- [x] –°–æ–∑–¥–∞–Ω—ã –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –≥—Ä–∞–Ω—Ç–æ–≤
- [x] –û–±–Ω–æ–≤–ª—ë–Ω Auditor Agent
- [x] –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [x] –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –ó–∞–ø—É—â–µ–Ω—ã —Ç–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω–æ
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ Telegram Bot
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ë–î
- [ ] –î–æ–±–∞–≤–ª–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ Streamlit
- [ ] –û–±—É—á–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞
- [ ] –†–∞–∑–≤—ë—Ä–Ω—É—Ç–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω

---

## üéØ –ò—Ç–æ–≥–∏

### –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–∏:

1. **–ì–∏–±—Ä–∏–¥–Ω—É—é LLM –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** - –ª—É—á—à–µ–µ –æ—Ç GigaChat –∏ Claude
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–æ—É—Ç–∏–Ω–≥** - –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–æ –∑–∞–¥–∞—á–µ
3. **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ü–µ–Ω–æ–∫** - Claude –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ + GigaChat —Ä—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç
4. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –ø—Ä–æ–≤–µ—Ä–æ–∫** - code execution –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
5. **Fallback –º–µ—Ö–∞–Ω–∏–∑–º** - –≤—ã—Å–æ–∫–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã
6. **–ì–æ—Ç–æ–≤—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É** - –∫–ª–∏–µ–Ω—Ç—ã, –ø—Ä–æ–º–ø—Ç—ã, —Ç–µ—Å—Ç—ã

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã: `python test_claude_code_integration.py`
2. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö
3. ‚úÖ –°—Ä–∞–≤–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Å —Ç–µ–∫—É—â–∏–º GigaChat
4. ‚úÖ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω
5. ‚úÖ –°–æ–±—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** grant-architect agent (Claude Code)
**–î–∞—Ç–∞:** 2025-10-05
**–í–µ—Ä—Å–∏—è:** 1.0

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: [CLAUDE_CODE_INTEGRATION_ARCHITECTURE.md](CLAUDE_CODE_INTEGRATION_ARCHITECTURE.md)
- Quick Start: [CLAUDE_CODE_QUICK_START.md](CLAUDE_CODE_QUICK_START.md)
- –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [CLAUDE.md](CLAUDE.md)

---

*"–ì—Ä–∞–Ω—Ç–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ —Å—Ç–∞–Ω—É—Ç –ª—É—á—à–µ —Å Claude Code –∏ GigaChat –≤–º–µ—Å—Ç–µ!"* üöÄ
