-- Migration 007: Replace interview questions with new 14Q set
-- Created: 2025-10-07
-- Description: Shift old questions to 15-38 (disabled), add new 14 active questions

BEGIN;

-- Step 1: Shift existing questions by +14 and disable them
UPDATE interview_questions
SET question_number = question_number + 14,
    is_active = false,
    updated_at = NOW();

-- Step 2: Insert new 14 questions with hints
INSERT INTO interview_questions (question_number, question_text, hint_text, field_name, question_type, is_required, is_active) VALUES
(1, 'Опишите суть проекта, что хотите сделать и для кого и зачем',
    '1 предложение — что / для кого / и зачем. Пример: «Интерактивный ИИ‑аватар для студентов, чтобы быстрее получать ответы и вовлекаться в мероприятия».',
    'project_essence', 'textarea', true, true),

(2, 'Укажите географию проекта (город, регион и тп)',
    'регион/город и основные площадки. Пример: «Кемерово; кампус КемГИК, аудитории №…».',
    'geography', 'textarea', true, true),

(3, 'Какую проблему решает проект и какую социальную значимость он несет?',
    'что не работает, кого касается, где проявляется, почему сейчас важно (цифры не требуются). Пример: «Медленная и разрозненная коммуникация в вузе мешает студентам быстро получать информацию и вовлекаться».',
    'problem_and_significance', 'textarea', true, true),

(4, 'Опишите целевую группу (участники, возраст)',
    'кто именно, возраст, ориентировочная численность. Пример: «Студенты 17–23, ~2500; абитуриенты и родители».',
    'target_group', 'textarea', true, true),

(5, 'Главная цель проекта (видение решения проблемы)',
    'одна чёткая цель, связанная с проблемой. Пример: «Повысить доступность и скорость коммуникации в вузе через ИИ‑аватара».',
    'main_goal', 'textarea', true, true),

(6, 'Задачи, которые нужно решить для достижения цели',
    '3–5 задач, каждая ведёт к цели (глаголами). Пример: «Создать 3D‑аватар; обучить на базе данных вуза; интегрировать с сайтами; обучить персонал».',
    'tasks', 'textarea', true, true),

(7, 'Какие мероприятия планируете провести?',
    'формат, периодичность, длительность, ориентировочный охват и площадки. Пример: «Мастер‑класс 2/мес, 2 ч, 25 чел; инфосессия 1/кв; 2 итоговых события».',
    'events', 'textarea', true, true),

(8, 'Партнеры проекта (организации, формы поддержки)',
    'перечислите партнёров и формы поддержки; ресурсы: что уже есть и чего не хватает. Пример: «КемГИК — помещения/оборудование; требуется: лицензия TTS (аренда), GPU (облако)».',
    'partners', 'textarea', true, true),

(9, 'Какая сумма позволит реализовать проект?',
    'ориентировочная общая сумма в рублях. Пример: «2 400 000».',
    'budget', 'text', true, true),

(10, 'Ссылки на сайт/соцсети (для оценки инфо‑открытости)',
    'сайт, 1–2 соцсети, публичные отчёты/реестры (если есть). Пример: «site.ru; VK: vk.com/...; отчёт в ЕГРЮЛ/Контур».',
    'links', 'textarea', false, true),

(11, 'История получения грантов (год, фонд, результат)',
    '1–3 кейса — год, донор/программа, сумма, результат/URL. Пример: «2023, ФПГ, 1,2 млн, «цифровые сервисы», отчёт: …».',
    'grant_history', 'textarea', false, true),

(12, 'Наличие ресурсов и оборудования для реализации',
    'помещения, оборудование, ПО/лицензии, сервера/облако, интеграции. Пример: «Студия, микрофоны, лицензии Zoom, VPS, интеграция с LMS».',
    'resources', 'textarea', true, true),

(13, 'Планируемые результаты (количественные и качественные)',
    '2–3 ключевых изменения без цифр и как их фиксировать (логи/опрос/отчёт), периодичность (мес/кв). Пример: «Больше консультаций через аватар (логи, мес); выше удовлетворённость (опрос/NPS, квартал)».',
    'results', 'textarea', true, true),

(14, 'Устойчивость после гранта: источники и планы масштабирования',
    'что продолжится после гранта, источники финансирования, роли партнёров, планы тиражирования. Пример: «Поддержка 12 мес за счёт внебюджета; партнёр — техподдержка; тиражирование в факультеты».',
    'sustainability', 'textarea', true, true);

COMMIT;

-- Verify results
SELECT
    question_number,
    LEFT(question_text, 60) as question,
    is_active
FROM interview_questions
ORDER BY question_number;
