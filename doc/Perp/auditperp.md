–û—Ç–ª–∏—á–Ω–æ! –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º –º–æ–¥–µ–ª–∏ Perplexity API –ø–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º! üìä

Read file: GrantService/doc/–ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Perplexity API.md
–û—Ç–ª–∏—á–Ω–æ! –¢–µ–ø–µ—Ä—å —è –ø–æ–Ω–∏–º–∞—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–æ–¥–µ–ª–µ–π Perplexity API. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ:

## **ÔøΩÔøΩ –ê–Ω–∞–ª–∏–∑ –º–æ–¥–µ–ª–µ–π Perplexity API:**

### **ÔøΩÔøΩ –ß—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ:**
- **–ü–æ–∏—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ** (–∫–∞–∫ –Ω–∞ —Å–∞–π—Ç–µ Perplexity)
- **–ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –æ –≥—Ä–∞–Ω—Ç–∞—Ö
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ —Ü–∏—Ç–∞—Ç—ã**
- **–≠–∫–æ–Ω–æ–º–∏—á–Ω–æ—Å—Ç—å**

### **üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –º–æ–¥–µ–ª–µ–π:**

| –ú–æ–¥–µ–ª—å | –í—Ö–æ–¥ | –í—ã—Ö–æ–¥ | –ü–æ–∏—Å–∫ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|------|-------|-------|----------|
| **`sonar`** | $1/1M | $1/1M | $5/1K | **–°–ê–ú–ê–Ø –î–ï–®–ï–í–ê–Ø** - –±–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫ |
| **`sonar-pro`** | $3/1M | $15/1M | $5/1K | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ø–æ–∏—Å–∫ |
| **`sonar-reasoning`** | $1/1M | $5/1M | $5/1K | –ü–æ–∏—Å–∫ + —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è |
| **`sonar-reasoning-pro`** | $2/1M | $8/1M | $5/1K | –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è |
| **`sonar-deep-research`** | $2/1M | $8/1M | $5/1K | **–°–ê–ú–ê–Ø –î–û–†–û–ì–ê–Ø** - –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è |

### **üîç –ß—Ç–æ –¥–∞–µ—Ç –∫–∞–∂–¥–∞—è –º–æ–¥–µ–ª—å:**

#### **`sonar` - –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–ê–Ø** ‚úÖ
- ‚úÖ **–ü–æ–∏—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ** (–∫–∞–∫ –Ω–∞ —Å–∞–π—Ç–µ)
- ‚úÖ **–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ —Ü–∏—Ç–∞—Ç—ã**
- ‚úÖ **–°–ê–ú–ê–Ø –î–ï–®–ï–í–ê–Ø** ($1/$1 –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤)
- ‚úÖ **–ë—ã—Å—Ç—Ä—ã–µ —Ñ–∞–∫—Ç—ã, –Ω–æ–≤–æ—Å—Ç–∏**
- ‚úÖ **50 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É**

#### **`sonar-pro` - –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á**
- ‚úÖ –ì–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
- ‚ùå **–í 15 —Ä–∞–∑ –¥–æ—Ä–æ–∂–µ** –≤—ã–≤–æ–¥–∞ ($15 vs $1)

#### **`sonar-deep-research` - –°–õ–ò–®–ö–û–ú –î–û–†–û–ì–û**
- ‚úÖ –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
- ‚ùå **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã:**
  - –¶–∏—Ç–∞—Ç—ã: $2/1M
  - –†–∞—Å—Å—É–∂–¥–µ–Ω–∏—è: $3/1M
  - –¢–æ–ª—å–∫–æ 5 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É

## **üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:**

### **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–¥–µ–ª—å `sonar`** –¥–ª—è –Ω–∞—à–µ–≥–æ —Å–ª—É—á–∞—è:

```python
# –í perplexity_service.py
def search_grants(self, query: str) -> str:
    payload = {
        "model": "sonar",  # –°–ê–ú–ê–Ø –î–ï–®–ï–í–ê–Ø –º–æ–¥–µ–ª—å
        "messages": [
            {
                "role": "user",
                "content": query
            }
        ],
        "search_mode": "web",  # –í–µ–±-–ø–æ–∏—Å–∫
        "return_related_questions": False,  # –≠–∫–æ–Ω–æ–º–∏—è
        "web_search_options": {
            "search_context_size": "medium"  # –ë–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–∞/—Å—Ç–æ–∏–º–æ—Å—Ç–∏
        }
    }
```

### **–ü–æ—á–µ–º—É `sonar`:**
1. **üí∞ –≠–∫–æ–Ω–æ–º–∏—á–Ω–æ—Å—Ç—å** - $1/$1 –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤
2. **üîç –ü–æ–∏—Å–∫ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ** - –∫–∞–∫ –Ω–∞ —Å–∞–π—Ç–µ Perplexity
3. **ÔøΩÔøΩ –ò—Å—Ç–æ—á–Ω–∏–∫–∏** - –µ—Å—Ç—å `search_results` –∏ `citations`
4. **‚ö° –°–∫–æ—Ä–æ—Å—Ç—å** - 50 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É
5. **ÔøΩÔøΩ –ü–æ–¥—Ö–æ–¥–∏—Ç** –¥–ª—è –ø–æ–∏—Å–∫–∞ –≥—Ä–∞–Ω—Ç–æ–≤

### **–ò–∑–±–µ–≥–∞–π—Ç–µ:**
- ‚ùå `sonar-deep-research` - —Å–ª–∏—à–∫–æ–º –¥–æ—Ä–æ–≥–æ
- ‚ùå `sonar-reasoning-pro` - –¥–æ—Ä–æ–≥–∏–µ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è
- ‚ùå –í—ã—Å–æ–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–∏—Å–∫–∞ - $12 –∑–∞ 1K –∑–∞–ø—Ä–æ—Å–æ–≤

**–û–±–Ω–æ–≤–ª—è–µ–º —Å–µ—Ä–≤–∏—Å –Ω–∞ –º–æ–¥–µ–ª—å `sonar`?** üéØ