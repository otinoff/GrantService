# GrantService - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-10-17
**–í–µ—Ä—Å–∏—è:** 1.0 MVP
**–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ ‚úÖ

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–≥–µ–Ω—Ç–æ–≤](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∞–≥–µ–Ω—Ç–æ–≤)
3. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∑–Ω–∞–Ω–∏–π](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö-–∏-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ-–∑–Ω–∞–Ω–∏–π)
4. [–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ](#—Ç–µ–∫—É—â–µ–µ-—Å–æ—Å—Ç–æ—è–Ω–∏–µ)
5. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
6. [–§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞](#—Ñ–∞–π–ª–æ–≤–∞—è-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)

---

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

GrantService - —ç—Ç–æ AI-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞–Ω—Ç–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Claude Code AI –∏ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ —Ñ–æ–Ω–¥–æ–≤.

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞—è–≤–æ–∫** - Writer Agent —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –≥—Ä–∞–Ω—Ç—ã
- ‚úÖ **–≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** - Reviewer Agent –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∑–∞—è–≤–∫–∏ –∫ –ø–æ–¥–∞—á–µ
- ‚úÖ **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –§–ü–ì** - Expert Agent —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º –ø–æ–∏—Å–∫–æ–º –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –§–æ–Ω–¥–∞ –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç—Å–∫–∏—Ö –≥—Ä–∞–Ω—Ç–æ–≤
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - Trainer Agent –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤
- üöß **Telegram –±–æ—Ç** - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- üöß **Web Admin** - –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

---

## ü§ñ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–≥–µ–Ω—Ç–æ–≤

### 1. Expert Agent (–¶–µ–Ω—Ç—Ä –∑–Ω–∞–Ω–∏–π) ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –†–∞–±–æ—Ç–∞–µ—Ç
**–§–∞–π–ª:** `expert_agent/expert_agent.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç-—ç–∫—Å–ø–µ—Ä—Ç –ø–æ –≥—Ä–∞–Ω—Ç–∞–º
- –•—Ä–∞–Ω–∏—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –§–ü–ì (–§–æ–Ω–¥ –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç—Å–∫–∏—Ö –≥—Ä–∞–Ω—Ç–æ–≤)
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥—Ä—É–≥–∏–º –∞–≥–µ–Ω—Ç–∞–º

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- PostgreSQL 18.0 - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- Qdrant (Docker) - –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ embeddings
- Sentence Transformers - multilingual-MiniLM-L12-v2

**API –º–µ—Ç–æ–¥—ã:**
```python
query_knowledge(question, fund="fpg", top_k=5, min_score=0.5)
add_knowledge_section(source_id, section_type, content)
get_statistics()
```

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- `knowledge_sources` - –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –§–ü–ì, —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—ã)
- `knowledge_sections` - —Ä–∞–∑–¥–µ–ª—ã –∑–Ω–∞–Ω–∏–π (embeddings ‚Üí Qdrant)
- `evaluation_criteria` - –∫—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏ –∑–∞—è–≤–æ–∫
- `successful_grant_examples` - —É—Å–ø–µ—à–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã

---

### 2. Writer Agent V2 (–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞—è–≤–æ–∫) ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –†–∞–±–æ—Ç–∞–µ—Ç
**–§–∞–π–ª:** `agents/writer_agent_v2.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≥—Ä–∞–Ω—Ç–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∫–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–∑ Expert Agent
- –°–æ–∑–¥–∞–µ—Ç 9 —Ä–∞–∑–¥–µ–ª–æ–≤ –∑–∞—è–≤–∫–∏ —Å —Ü–∏—Ç–∞—Ç–∞–º–∏ –∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
- ‚úÖ Expert Agent - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –§–ü–ì
- ‚úÖ Claude Code API - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
- ‚úÖ PostgreSQL - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫

**–ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:**
1. **Stage 1: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** (Claude Code)
   - –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–∞ –∑–∞—è–≤–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π Expert Agent
2. **Stage 2: –ù–∞–ø–∏—Å–∞–Ω–∏–µ** (Claude Code)
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö 9 —Ä–∞–∑–¥–µ–ª–æ–≤ —Å —Ü–∏—Ç–∞—Ç–∞–º–∏ –∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```python
{
  'status': 'success',
  'application_number': '#AN-20251017-001',
  'quality_score': 7.0,  # –∏–∑ 10
  'citations': [...],     # 6+ —Ü–∏—Ç–∞—Ç
  'tables': [...],        # 2+ —Ç–∞–±–ª–∏—Ü—ã
  'application': {
    'section_1_brief': '...',
    'section_2_problem': '...',
    ...
  }
}
```

**–¢–µ—Å—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ 16,306 —Å–∏–º–≤–æ–ª–æ–≤ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ 9 —Ä–∞–∑–¥–µ–ª–æ–≤
- ‚úÖ 6 —Ü–∏—Ç–∞—Ç –∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –§–ü–ì
- ‚úÖ ~2 –º–∏–Ω—É—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚ùå –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î (–ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–ª–µ–º `title`)

---

### 3. Reviewer Agent (–û—Ü–µ–Ω—â–∏–∫ –∫–∞—á–µ—Å—Ç–≤–∞) ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –†–∞–±–æ—Ç–∞–µ—Ç
**–§–∞–π–ª:** `agents/reviewer_agent.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
- –û—Ü–µ–Ω–∏–≤–∞–µ—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∑–∞—è–≤–∫–∏ –∫ –ø–æ–¥–∞—á–µ
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç 4 –∫—Ä–∏—Ç–µ—Ä–∏—è —Å –≤–µ—Å–∞–º–∏
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ–¥–æ–±—Ä–µ–Ω–∏—è

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
- ‚úÖ Expert Agent - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –§–ü–ì –¥–ª—è –æ—Ü–µ–Ω–∫–∏
- ‚úÖ Claude Code API - –∞–Ω–∞–ª–∏–∑ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**4 –∫—Ä–∏—Ç–µ—Ä–∏—è –æ—Ü–µ–Ω–∫–∏:**

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –í–µ—Å | –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç |
|----------|-----|---------------|
| **Evidence Base** | 40% | –î–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω–∞—è –±–∞–∑–∞: —Ü–∏—Ç–∞—Ç—ã (10+), —Ç–∞–±–ª–∏—Ü—ã (2+), –≥–æ—Å–ø—Ä–æ–≥—Ä–∞–º–º—ã, —É—Å–ø–µ—à–Ω—ã–µ –∫–µ–π—Å—ã |
| **Structure** | 30% | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –ø–æ–ª–Ω–æ—Ç–∞: 6 —Ä–∞–∑–¥–µ–ª–æ–≤, –æ–±—ä–µ–º (15,000+ —Å–∏–º–≤–æ–ª–æ–≤), –¥–µ—Ç–∞–ª—å–Ω–æ—Å—Ç—å |
| **Matching** | 20% | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω—ã–π –º–∞—Ç—á–∏–Ω–≥: SMART-—Ü–µ–ª–∏, –∏–∑–º–µ—Ä–∏–º—ã–µ KPI, —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ |
| **Economics** | 10% | –≠–∫–æ–Ω–æ–º–∏–∫–∞: –±—é–¥–∂–µ—Ç, –¥–µ—Ç–∞–ª—å–Ω–æ—Å—Ç—å, —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |

**–§–æ—Ä–º—É–ª–∞ –æ—Ü–µ–Ω–∫–∏:**
```python
readiness_score = (
    evidence * 0.40 +
    structure * 0.30 +
    matching * 0.20 +
    economics * 0.10
)  # 0-10

approval_probability = 15 + (readiness_score * 4.375)  # 0-100%
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```python
{
  'status': 'success',
  'readiness_score': 6.4,        # –∏–∑ 10
  'approval_probability': 43.0,  # %
  'can_submit': False,            # –ø–æ—Ä–æ–≥ 7.0
  'quality_tier': 'Acceptable',
  'fpg_requirements': {...},      # 12 —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏–∑ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î
  'criteria_scores': {...},
  'strengths': [...],
  'weaknesses': [...],
  'recommendations': [...]
}
```

**–¢–µ—Å—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–Ω–∞ mock –¥–∞–Ω–Ω—ã—Ö):**
- ‚úÖ Readiness: 6.4/10
- ‚úÖ Approval: 43%
- ‚úÖ 12 —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏–∑ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î –∑–∞–≥—Ä—É–∂–µ–Ω—ã
- ‚úÖ ~27 —Å–µ–∫—É–Ω–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚ùå Review –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î (–Ω—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `review_and_save_grant_async`)

---

### 4. Trainer Agent (–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫) ‚úÖ

**–°—Ç–∞—Ç—É—Å:** –†–∞–±–æ—Ç–∞–µ—Ç
**–§–∞–π–ª:** `agents/trainer_agent/trainer_agent.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∞–≥–µ–Ω—Ç–æ–≤
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ç—á–µ—Ç—ã –≤ JSON

**–ú–µ—Ç–æ–¥—ã:**
```python
# –¢–µ—Å—Ç Writer Agent
test_writer_functionality(test_case, use_real_llm=True)

# –¢–µ—Å—Ç Reviewer Agent
test_reviewer_functionality(test_case, use_real_llm=True)
```

**6 –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞:**
1. ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞
2. ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Expert Agent
3. ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
4. ‚úÖ –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
5. ‚ö†Ô∏è –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î (–ø—Ä–æ–±–ª–µ–º—ã)
6. ‚úÖ –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–û—Ç—á–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è:**
- `agents/trainer_agent/reports/TR-YYYYMMDD-HHMMSS.json`
- –ö–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ `Project_workflow/05-Reports/`

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∑–Ω–∞–Ω–∏–π

### PostgreSQL 18.0 (localhost:5432)

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**

| –¢–∞–±–ª–∏—Ü–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|-----------|--------|
| `knowledge_sources` | –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –§–ü–ì | ‚úÖ –ó–∞–ø–æ–ª–Ω–µ–Ω–∞ |
| `knowledge_sections` | –†–∞–∑–¥–µ–ª—ã –∑–Ω–∞–Ω–∏–π (48+ –∑–∞–ø–∏—Å–µ–π) | ‚úÖ –ó–∞–ø–æ–ª–Ω–µ–Ω–∞ |
| `evaluation_criteria` | –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏ –∑–∞—è–≤–æ–∫ | ‚úÖ –ó–∞–ø–æ–ª–Ω–µ–Ω–∞ |
| `successful_grant_examples` | –ü—Ä–∏–º–µ—Ä—ã —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞—è–≤–æ–∫ | ‚úÖ –ó–∞–ø–æ–ª–Ω–µ–Ω–∞ |
| `grant_applications` | –ì—Ä–∞–Ω—Ç–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ | ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Å `title` |
| `reviewer_reviews` | –û—Ü–µ–Ω–∫–∏ –æ—Ç Reviewer Agent | üöß –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| `researcher_research` | –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå Writer Agent: –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞—è–≤–∫–∏ (–ø–æ–ª–µ `title` NULL)
- ‚ùå Reviewer Agent: –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç reviews (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `review_grant_async` –≤–º–µ—Å—Ç–æ `review_and_save_grant_async`)

---

### Qdrant (Docker, localhost:6333)

**–ö–æ–ª–ª–µ–∫—Ü–∏—è:** `knowledge_sections`

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –í–µ–∫—Ç–æ—Ä–æ–≤: 48+
- –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å: 384 (multilingual-MiniLM-L12-v2)
- –ú–µ—Ç—Ä–∏–∫–∞: Cosine similarity
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π score: 0.4-0.5

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**
```python
# Reviewer Agent
expert_agent.query_knowledge(
    "–ö–∞–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω–æ–π –±–∞–∑–µ –≤ –≥—Ä–∞–Ω—Ç–æ–≤–æ–π –∑–∞—è–≤–∫–µ?",
    fund="fpg",
    top_k=3,
    min_score=0.4
)
# ‚Üí 3 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–∞ —Å score 0.4-0.8
```

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (5/6 —Ç–µ—Å—Ç–æ–≤ passed)

1. **Expert Agent** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç
   - PostgreSQL + Qdrant –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
   - –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ —Å embeddings
   - 48+ —Ä–∞–∑–¥–µ–ª–æ–≤ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –§–ü–ì

2. **Writer Agent V2** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∑–∞—è–≤–∫–∏ (~16,000 —Å–∏–º–≤–æ–ª–æ–≤)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Expert Agent
   - Claude Code API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
   - ‚ùå –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î

3. **Reviewer Agent** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏
   - –û—Ü–µ–Ω–∏–≤–∞–µ—Ç –∑–∞—è–≤–∫–∏ –ø–æ 4 –∫—Ä–∏—Ç–µ—Ä–∏—è–º
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç 12 —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏–∑ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î
   - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç readiness score –∏ approval probability
   - ‚ùå –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç reviews –≤ –ë–î

4. **Trainer Agent** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –¢–µ—Å—Ç–∏—Ä—É–µ—Ç Writer –∏ Reviewer
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç—ã –≤ JSON
   - 6 —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

### ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Writer Agent DB Save** (–∫—Ä–∏—Ç–∏—á–Ω–æ)
   ```
   ERROR: –∑–Ω–∞—á–µ–Ω–∏–µ NULL –≤ —Å—Ç–æ–ª–±—Ü–µ "title" –Ω–∞—Ä—É—à–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ NOT NULL
   ```
   - –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `title` –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏

2. **Reviewer Agent DB Save** (–∫—Ä–∏—Ç–∏—á–Ω–æ)
   - Trainer –≤—ã–∑—ã–≤–∞–µ—Ç `review_grant_async()` –≤–º–µ—Å—Ç–æ `review_and_save_grant_async()`
   - Reviews –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `reviewer_reviews`

3. **–ù–∏–∑–∫–∏–µ –æ—Ü–µ–Ω–∫–∏ –æ—Ç Reviewer** (—Ç—Ä–µ–±—É–µ—Ç –∞–Ω–∞–ª–∏–∑–∞)
   - Readiness: 6.4/10 (–ø–æ—Ä–æ–≥ 7.0)
   - Matching: 3.0/10 - –Ω–µ—Ç –∏–∑–º–µ—Ä–∏–º—ã—Ö KPI
   - Economics: 2.5/10 - –º–∞–ª–æ –¥–µ—Ç–∞–ª–µ–π –≤ –±—é–¥–∂–µ—Ç–µ
   - **–í–ê–ñ–ù–û:** –û—Ü–µ–Ω–∏–≤–∞–ª–∏—Å—å mock –¥–∞–Ω–Ω—ã–µ, –Ω–µ —Ä–µ–∞–ª—å–Ω–∞—è –∑–∞—è–≤–∫–∞!

### üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î** (–∫—Ä–∏—Ç–∏—á–Ω–æ)
   - Writer: –¥–æ–±–∞–≤–∏—Ç—å `title` field
   - Reviewer: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `review_and_save_grant_async()`

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω** Writer ‚Üí Reviewer
   - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –†–ï–ê–õ–¨–ù–£–Æ –∑–∞—è–≤–∫—É —á–µ—Ä–µ–∑ Writer
   - –û—Ü–µ–Ω–∏—Ç—å –µ—ë —á–µ—Ä–µ–∑ Reviewer
   - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

3. **–£–ª—É—á—à–∏—Ç—å Writer Agent** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
   - –î–æ–±–∞–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏–∑–º–µ—Ä–∏–º—ã—Ö KPI
   - –î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ
   - –£–≤–µ–ª–∏—á–∏—Ç—å –æ–±—ä–µ–º –¥–æ 15,000+ —Å–∏–º–≤–æ–ª–æ–≤

4. **–°–æ–∑–¥–∞—Ç—å –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π —Ü–∏–∫–ª** Writer ‚Üî Reviewer
   - Writer –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∑–∞—è–≤–∫—É
   - Reviewer –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ –¥–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
   - Writer —É–ª—É—á—à–∞–µ—Ç –∑–∞—è–≤–∫—É –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
   - –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–æ readiness >= 7.0

---

## üíª –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **Python 3.12**
- **PostgreSQL 18.0** - –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î
- **Qdrant** (Docker) - –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î
- **Sentence Transformers** - embeddings

### AI/ML
- **Claude Code API** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (Writer Agent)
- **multilingual-MiniLM-L12-v2** - –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ embeddings

### Frontend (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- **Telegram Bot** - –æ—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **Web Admin (React)** - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å

---

## üìÅ –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
GrantService/
‚îú‚îÄ‚îÄ Project_workflow/                # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ 00-Architecture/            # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ 01-Stages/                  # –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 2025-10-17_Expert-Agent-Architecture/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 2025-10-17_Trainer-Agent-Architecture/
‚îÇ   ‚îú‚îÄ‚îÄ 02-Sessions/                # –°–µ—Å—Å–∏–∏ —Ä–∞–±–æ—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 2025-10-17_Writer-Expert-Integration.md
‚îÇ   ‚îú‚îÄ‚îÄ 03-Tests/                   # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ 04-Documentation/           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ 05-Reports/                 # –û—Ç—á–µ—Ç—ã Trainer Agent
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TR-20251017-143104.json (Writer test)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TR-20251017-150349.json (Reviewer test)
‚îÇ   ‚îú‚îÄ‚îÄ ARCHITECTURE.md             # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ STATUS.md                   # –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å (TODO)
‚îÇ   ‚îî‚îÄ‚îÄ ROADMAP.md                  # –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è (TODO)
‚îÇ
‚îú‚îÄ‚îÄ agents/                          # AI –ê–≥–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ writer_agent_v2.py          # ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–∞—è–≤–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ reviewer_agent.py           # ‚úÖ –û—Ü–µ–Ω—â–∏–∫ –∫–∞—á–µ—Å—Ç–≤–∞
‚îÇ   ‚îú‚îÄ‚îÄ interviewer_agent.py        # üöß –ò–Ω—Ç–µ—Ä–≤—å—é–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ researcher_agent_v2.py      # üöß –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å
‚îÇ   ‚îî‚îÄ‚îÄ trainer_agent/              # ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫
‚îÇ       ‚îú‚îÄ‚îÄ trainer_agent.py
‚îÇ       ‚îî‚îÄ‚îÄ reports/
‚îÇ
‚îú‚îÄ‚îÄ expert_agent/                    # Expert Agent (–≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î)
‚îÇ   ‚îú‚îÄ‚îÄ expert_agent.py             # ‚úÖ –¶–µ–Ω—Ç—Ä –∑–Ω–∞–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ migrations/                 # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ       ‚îî‚îÄ‚îÄ seed_knowledge_base.py  # ‚úÖ –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã
‚îÇ
‚îú‚îÄ‚îÄ data/database/                   # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ models.py                   # ‚úÖ –ú–æ–¥–µ–ª–∏ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ schema.sql                  # ‚úÖ –°—Ö–µ–º–∞
‚îÇ
‚îú‚îÄ‚îÄ run_trainer_test_REAL.py        # ‚úÖ –¢–µ—Å—Ç Writer Agent
‚îú‚îÄ‚îÄ run_trainer_test_reviewer.py    # ‚úÖ –¢–µ—Å—Ç Reviewer Agent
‚îÇ
‚îú‚îÄ‚îÄ telegram-bot/                    # üöß Telegram –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ web-admin/                       # üöß Web –ø–∞–Ω–µ–ª—å
‚îî‚îÄ‚îÄ config/                          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    ‚îî‚îÄ‚îÄ .env                         # API –∫–ª—é—á–∏, –ë–î
```

---

## üîó –°–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

```mermaid
graph TD
    User[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] -->|–ó–∞–ø–æ–ª–Ω—è–µ—Ç –∞–Ω–∫–µ—Ç—É| TG[Telegram Bot]
    TG -->|–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ| Writer[Writer Agent V2]

    Writer -->|–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è| Expert[Expert Agent]
    Expert -->|PostgreSQL| DB[(PostgreSQL)]
    Expert -->|–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫| Qdrant[(Qdrant)]

    Writer -->|–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç| Claude[Claude Code API]
    Writer -->|–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞—è–≤–∫—É| DB

    Writer -->|–ó–∞—è–≤–∫–∞ –≥–æ—Ç–æ–≤–∞| Reviewer[Reviewer Agent]
    Reviewer -->|–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è| Expert
    Reviewer -->|–û—Ü–µ–Ω–∏–≤–∞–µ—Ç| Review[Review Results]
    Review -->|–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ü–µ–Ω–∫—É| DB

    Trainer[Trainer Agent] -.->|–¢–µ—Å—Ç–∏—Ä—É–µ—Ç| Writer
    Trainer -.->|–¢–µ—Å—Ç–∏—Ä—É–µ—Ç| Reviewer
    Trainer -.->|–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ç—á–µ—Ç—ã| Reports[/Reports/]
```

---

## üìù –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 2025-10-17 - Initial Architecture Document
- –°–æ–∑–¥–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (5/6 —Ç–µ—Å—Ç–æ–≤ passed)
- –í—ã—è–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-17 15:20
**–ê–≤—Ç–æ—Ä:** Andrey (—Å –ø–æ–º–æ—â—å—é Claude Code)
**–í–µ—Ä—Å–∏—è:** 1.0 MVP
