# ะะพะฝัะตะฟััะฐะปัะฝะพะต ะทะฝะฐะฝะธะต - ะะพะผะฟะพะฝะตะฝัั ะฐะดะฐะฟัะธะฒะฝะพะณะพ ะธะฝัะตัะฒััะตัะฐ

## ะะฑะทะพั ัะธััะตะผั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                 ADAPTIVE INTERVIEWER SYSTEM                  โ
โ                                                              โ
โ  1. Reference Points Framework     โ ะงัะพ ะฝัะถะฝะพ ัะทะฝะฐัั       โ
โ  2. Adaptive Question Generator    โ ะะฐะบ ัะฟัะพัะธัั           โ
โ  3. Qdrant Integration for Context โ ะะพะฝัะตะบัั ะธะท ะฑะฐะทั ะคะะ   โ
โ  4. Natural Conversation Flow      โ ะฃะฟัะฐะฒะปะตะฝะธะต ะดะธะฐะปะพะณะพะผ    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

# 1๏ธโฃ Reference Points Framework

## ๐ฏ ะงัะพ ััะพ?

**Reference Point (ะะฟะพัะฝะฐั ัะพัะบะฐ)** - ััะพ **ัะตะปั ะธะฝัะตัะฒัั**, ะฐ ะฝะต ะบะพะฝะบัะตัะฝัะน ะฒะพะฟัะพั.

### ะะฝะฐะปะพะณะธั ะธะท ะถะธะทะฝะธ:

**ะขัะฐะดะธัะธะพะฝะฝะพะต ะธะฝัะตัะฒัั (ะถะตััะบะธะต ะฒะพะฟัะพัั):**
```
ะั ะธะดะตัะต ะฟะพ GPS ั ะถะตััะบะธะผะธ ะธะฝััััะบัะธัะผะธ:
1. ะัะพะนะดะธ 100 ะผะตััะพะฒ ะฟััะผะพ
2. ะะพะฒะตัะฝะธ ะฝะฐะปะตะฒะพ ะฝะฐ ะฟะตัะตะบัะตััะบะต
3. ะัะพะนะดะธ ะตัะต 50 ะผะตััะพะฒ
...

ะัะพะฑะปะตะผะฐ: ะัะปะธ ะดะพัะพะณะฐ ะทะฐะบัััะฐ ะธะปะธ ะฒั ัะถะต ััะดะพะผ -
          ะธะฝััััะบัะธะธ ะฝะต ะฐะดะฐะฟัะธัััััั!
```

**Reference Points:**
```
ะั ะทะฝะฐะตัะต ะขะะงะะ ะะะะะะงะะะะฏ:
- ะะพะฑัะฐัััั ะดะพ ะฟะพััั
- ะะฐะนัะธ ะฒ ะผะฐะณะฐะทะธะฝ
- ะะพะนัะธ ะดะพ ะดะพะผะฐ

ะััั ะฐะดะฐะฟัะธะฒะฝัะน: ะัะปะธ ะฒั ัะถะต ััะดะพะผ ั ะฟะพััะพะน,
                 GPS ะฟัะพะฟัััะธั ะปะธัะฝะธะต ะธะฝััััะบัะธะธ.
```

---

## ๐ ะกัััะบัััะฐ Reference Point

```python
class ReferencePoint:
    """
    ะะฟะพัะฝะฐั ัะพัะบะฐ ะธะฝัะตัะฒัั
    """
    # ะะดะตะฝัะธัะธะบะฐัะธั
    id: str              # "understand_methodology"
    name: str            # "ะฃะทะฝะฐัั ะผะตัะพะดะพะปะพะณะธั ัะตะฐะปะธะทะฐัะธะธ"
    description: str     # ะะพะดัะพะฑะฝะพะต ะพะฟะธัะฐะฝะธะต ัะตะปะธ

    # ะัะธะพัะธัะตั
    priority: int        # 0 (ะบัะธัะธัะฝะพ) - 3 (ะพะฟัะธะพะฝะฐะปัะฝะพ)
    required: bool       # ะะฑัะทะฐัะตะปัะฝะพ ะธะปะธ ะฝะตั?

    # ะัะธัะตัะธะธ ะทะฐะฒะตััะตะฝะฝะพััะธ
    completion_criteria: dict = {
        # ะะฐะบะธะต ะฟะพะปั ะฐะฝะบะตัั ะดะพะปะถะฝั ะฑััั ะทะฐะฟะพะปะฝะตะฝั
        'fields_filled': ['methodology', 'tasks'],

        # ะะธะฝะธะผะฐะปัะฝะฐั ะดะปะธะฝะฐ ะพัะฒะตัะฐ
        'min_length': 100,

        # ะััั ะปะธ ะบะพะฝะบัะตัะธะบะฐ (ะฝะต ะพะฑัะธะต ััะฐะทั)
        'has_specifics': True,

        # ะะตั ะฟัะพัะธะฒะพัะตัะธะน ั ะฟัะตะดัะดััะธะผะธ ะพัะฒะตัะฐะผะธ
        'no_contradictions': True,

        # ะกะพะพัะฒะตัััะฒะธะต ััะตะฑะพะฒะฐะฝะธัะผ ะคะะ
        'meets_fpg_requirements': True
    }

    # ะะฐะฒะธัะธะผะพััะธ
    depends_on: list     # ะะฐะบะธะต RP ะดะพะปะถะฝั ะฑััั ะฒัะฟะพะปะฝะตะฝั ะดะพ ััะพะณะพ
    enables: list        # ะะฐะบะธะต RP ััะฐะฝะพะฒัััั ะดะพัััะฟะฝั ะฟะพัะปะต

    # ะะพะดัะบะฐะทะบะธ ะดะปั ะณะตะฝะตัะฐัะธะธ ะฒะพะฟัะพัะพะฒ
    question_hints: list = [
        "ะะฐะบ ะฒั ะฟะปะฐะฝะธััะตัะต...",
        "ะะฐะบะธะต ะบะพะฝะบัะตัะฝัะต ัะฐะณะธ...",
        "ะะฟะธัะธัะต ะฟัะพัะตัั..."
    ]

    # ะขะตะณะธ ะดะปั ะบะพะฝัะตะบััะฐ
    tags: list = ['implementation', 'methodology', 'P1']
```

---

## ๐ ะะธะทะฝะตะฝะฝัะน ัะธะบะป Reference Point

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                Reference Point Lifecycle                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

1. PENDING (ะะถะธะดะฐะตั)
   โโ ะฃัะปะพะฒะธั: ะะฐะฒะธัะธะผะพััะธ ะฝะต ะฒัะฟะพะปะฝะตะฝั
   โโ ะะตะนััะฒะธะต: ะัะพะฟัััะธัั

2. READY (ะะพัะพะฒ ะบ ะฒัะฟะพะปะฝะตะฝะธั)
   โโ ะฃัะปะพะฒะธั: ะะฐะฒะธัะธะผะพััะธ ะฒัะฟะพะปะฝะตะฝั, ะบัะธัะตัะธะธ ะฝะต ะดะพััะธะณะฝััั
   โโ ะะตะนััะฒะธะต: ะกะณะตะฝะตัะธัะพะฒะฐัั ะฒะพะฟัะพั

3. IN_PROGRESS (ะัะฟะพะปะฝัะตััั)
   โโ ะฃัะปะพะฒะธั: ะะพะฟัะพั ะทะฐะดะฐะฝ, ะถะดะตะผ ะพัะฒะตัะฐ
   โโ ะะตะนััะฒะธะต: ะะฑัะฐะฑะฐััะฒะฐัั ะพัะฒะตั

4. PARTIALLY_COMPLETE (ะงะฐััะธัะฝะพ ะทะฐะฒะตััะตะฝ)
   โโ ะฃัะปะพะฒะธั: ะะตะบะพัะพััะต ะบัะธัะตัะธะธ ะดะพััะธะณะฝััั, ะฝะพ ะฝะต ะฒัะต
   โโ ะะตะนััะฒะธะต: ะะพะทะผะพะถะฝะพ, ััะพัะฝะธัั ะฟะพะทะถะต

5. COMPLETE (ะะฐะฒะตััะตะฝ)
   โโ ะฃัะปะพะฒะธั: ะัะต ะบัะธัะตัะธะธ ะดะพััะธะณะฝััั
   โโ ะะตะนััะฒะธะต: ะะฐะทะฑะปะพะบะธัะพะฒะฐัั ะทะฐะฒะธัะธะผัะต RP

6. SKIPPED (ะัะพะฟััะตะฝ)
   โโ ะฃัะปะพะฒะธั: ะะต ััะตะฑัะตััั ะดะปั ะดะฐะฝะฝะพะณะพ ะฟัะพะตะบัะฐ
   โโ ะะตะนััะฒะธะต: ะะณะฝะพัะธัะพะฒะฐัั
```

---

## ๐ ะะตัะฐััะธั Reference Points

### ะัะธะผะตั ััััะบัััั:

```
TIER 0 (ะัะธัะธัะฝะพ - ะดะพะปะถะฝั ะฑััั ะฟะตัะฒัะผะธ):
โโ RP1: "ะะพะฝััั ัััั ะฟัะพะตะบัะฐ"
โ   โโ Fields: project_name, project_goal
โ   โโ Why: ะะตะท ััะพะณะพ ะฝะตะฒะพะทะผะพะถะฝะพ ะทะฐะดะฐะฒะฐัั ัะปะตะดัััะธะต ะฒะพะฟัะพัั
โ
โโ RP2: "ะะฟัะตะดะตะปะธัั ะฟัะพะฑะปะตะผั"
โ   โโ Fields: problem_description
โ   โโ Depends on: RP1 (ะฝัะถะฝะพ ะทะฝะฐัั ัััั)
โ   โโ Why: ะัะพะฑะปะตะผะฐ ะพะฟัะตะดะตะปัะตั ะพััะฐะปัะฝัะต ะฒะพะฟัะพัั
โ
โโ RP3: "ะะฐะนัะธ ัะตะปะตะฒัั ะฐัะดะธัะพัะธั"
    โโ Fields: target_audience
    โโ Depends on: RP2 (ะบัะพ ะทะฐััะพะฝัั ะฟัะพะฑะปะตะผะพะน?)
    โโ Why: ะฆะ ะฒะปะธัะตั ะฝะฐ ะผะตัะพะดะพะปะพะณะธั

TIER 1 (ะะฐะถะฝะพ - ะพัะฝะพะฒะฝะฐั ัะฐััั):
โโ RP4: "ะฃะทะฝะฐัั ะผะตัะพะดะพะปะพะณะธั"
โ   โโ Fields: methodology, tasks, timeline
โ   โโ Depends on: RP1, RP2, RP3
โ   โโ Enables: RP5 (ะฑัะดะถะตั ะทะฐะฒะธัะธั ะพั ะผะตัะพะดะพะปะพะณะธะธ)
โ
โโ RP5: "ะัะตะฝะธัั ะฑัะดะถะตั"
โ   โโ Fields: budget_total, budget_breakdown
โ   โโ Depends on: RP4 (ะฑัะดะถะตั ะธะท ะผะตัะพะดะพะปะพะณะธะธ)
โ   โโ Why: ะคะะ ััะตะฑัะตั ะดะตัะฐะปัะฝัะน ะฑัะดะถะตั
โ
โโ RP6: "ะะฟัะตะดะตะปะธัั ัะตะทัะปััะฐัั"
    โโ Fields: expected_results, indicators
    โโ Depends on: RP4 (ัะตะทัะปััะฐัั ะธะท ะผะตัะพะดะพะปะพะณะธะธ)
    โโ Why: ะะทะผะตัะธะผัะต ัะตะทัะปััะฐัั ะดะปั ะคะะ

TIER 2 (ะะตะปะฐัะตะปัะฝะพ - ััะพัะฝะตะฝะธั):
โโ RP7: "ะะพะฝััั ะบะพะผะฐะฝะดั"
โ   โโ Fields: team_description, roles
โ   โโ Required: False (ะผะพะถะตั ะฑััั solo)
โ   โโ Why: ะะพะผะฐะฝะดะฐ ะฒะปะธัะตั ะฝะฐ ัะตะฐะปะธะทัะตะผะพััั
โ
โโ RP8: "ะััะฒะธัั ัะธัะบะธ"
โ   โโ Fields: risks, mitigation
โ   โโ Why: ะคะะ ัะตะฝะธั ะพัะพะทะฝะฐะฝะฝะพััั ัะธัะบะพะฒ
โ
โโ RP9: "ะัะตะฝะธัั ัััะพะนัะธะฒะพััั"
    โโ Fields: sustainability, long_term_plan
    โโ Why: ะัะพะตะบั ะดะพะปะถะตะฝ ะถะธัั ะฟะพัะปะต ะณัะฐะฝัะฐ
```

---

## ๐ก ะะพะฝัะตะฟััะฐะปัะฝะพะต ะทะฝะฐะฝะธะต Reference Points

### ะะปััะตะฒะฐั ะธะดะตั:

> **ะะผะตััะพ "ะงัะพ ัะฟัะพัะธัั?" โ "ะงัะพ ะฝัะถะฝะพ ัะทะฝะฐัั?"**

### ะคะธะปะพัะพัะธั:

1. **ะฆะตะปะธ, ะฝะต ััะตะดััะฒะฐ:**
   - ะะพะฟัะพั - ััะพ ััะตะดััะฒะพ ะดะพััะธะถะตะฝะธั ัะตะปะธ
   - Reference Point - ััะพ ัะฐะผะฐ ัะตะปั
   - ะกัะตะดััะฒะฐ ะผะพะณัั ะผะตะฝััััั, ัะตะปะธ - ะฝะตั

2. **ะะดะฐะฟัะธะฒะฝะพััั ัะตัะตะท ะฐะฑัััะฐะบัะธั:**
   - ะะฑัััะฐะบัะฝัะต ัะตะปะธ โ ะบะพะฝะบัะตัะฝัะต ะฒะพะฟัะพัั
   - ะะดะธะฝ RP โ ะผะฝะพะณะพ ะฒะพะทะผะพะถะฝัั ะฒะพะฟัะพัะพะฒ
   - ะัะฑะพั ะทะฐะฒะธัะธั ะพั ะบะพะฝัะตะบััะฐ

3. **ะะทะผะตัะธะผะพััั ะทะฐะฒะตััะตะฝะฝะพััะธ:**
   - ะงะตัะบะธะต ะบัะธัะตัะธะธ: ะฒัะฟะพะปะฝะตะฝ RP ะธะปะธ ะฝะตั
   - ะะต "ะทะฐะดะฐะปะธ ะฒะพะฟัะพั", ะฐ "ะดะพััะธะณะปะธ ัะตะปะธ"

4. **ะะตะทะฐะฒะธัะธะผะพััั ะพั ัะพัะผัะปะธัะพะฒะพะบ:**
   - RP ะพะฟะธััะฒะฐะตั ะกะฃะขะฌ, ะฝะต ัะพัะผัะปะธัะพะฒะบั
   - ะะพะถะฝะพ ะผะตะฝััั ะฒะพะฟัะพัั, RP ะพััะฐัััั
   - ะะตะณะบะพ ะปะพะบะฐะปะธะทะพะฒะฐัั, ะฐะดะฐะฟัะธัะพะฒะฐัั

### ะัะธะผะตั ะฟัะธะผะตะฝะตะฝะธั:

**RP: "ะฃะทะฝะฐัั ะผะตัะพะดะพะปะพะณะธั"**

**ะะพะฝัะตะบัั 1:** ะกะพัะธะฐะปัะฝัะน ะฟัะพะตะบั, ะฝะพะฒะธัะพะบ
```
โ ะะพะฟัะพั: "ะะฐััะบะฐะถะธัะต, ะบะฐะบ ะฒั ะฑัะดะตัะต ะฟะพะผะพะณะฐัั ะปัะดัะผ?
           ะะฐะบะธะต ะบะพะฝะบัะตัะฝัะต ะดะตะนััะฒะธั ะฟะปะฐะฝะธััะตัะต?"
```

**ะะพะฝัะตะบัั 2:** ะะฐััะฝัะน ะฟัะพะตะบั, ัะบัะฟะตัั
```
โ ะะพะฟัะพั: "ะะฐะบัั ะธััะปะตะดะพะฒะฐัะตะปััะบัั ะผะตัะพะดะพะปะพะณะธั ะฒั ะฟัะธะผะตะฝัะตัะต?
           ะะพะปะธัะตััะฒะตะฝะฝัะน ะธะปะธ ะบะฐัะตััะฒะตะฝะฝัะน ะฐะฝะฐะปะธะท?"
```

**ะะพะฝัะตะบัั 3:** ะฃะถะต ัะฐััะธัะฝะพ ะพัะฒะตัะธะปะธ
```
โ ะะพะฟัะพั: "ะั ัะฟะพะผัะฝัะปะธ {ะผะตัะพะด X}. ะะฐะบ ะบะพะฝะบัะตัะฝะพ ััะพ ะฑัะดะตั
           ัะตะฐะปะธะทะพะฒะฐะฝะพ? ะะฐะบะธะต ััะฐะฟั?"
```

**ะกััั RP ะฝะต ะผะตะฝัะตััั, ะฒะพะฟัะพัั ะฐะดะฐะฟัะธัััััั!**

---

# 2๏ธโฃ Adaptive Question Generator

## ๐ฏ ะงัะพ ััะพ?

**Adaptive Question Generator** - ััะพ "ะผะพะทะณ" ะธะฝัะตัะฒััะตัะฐ, ะบะพัะพััะน **ะณะตะฝะตัะธััะตั ะบะพะฝัะตะบััะฝัะต ะฒะพะฟัะพัั** ะฝะฐ ะปะตัั.

### ะะฝะฐะปะพะณะธั:

**ะะฑััะฝัะน ะพะฟัะพั:**
```
ะะฝะบะตัะฐ ั 15 ะฒะพะฟัะพัะฐะผะธ ะฝะฐ ะฑัะผะฐะณะต.
ะัะตะผ ะพะดะธะฝะฐะบะพะฒะฐั. ะะต ะฐะดะฐะฟัะธััะตััั.
```

**Adaptive Generator:**
```
ะะธะฒะพะน ะบะพะฝััะปััะฐะฝั, ะบะพัะพััะน:
- ะกะปััะฐะตั ะฒะฐั
- ะะฐะดะฐะตั ัะปะตะดัััะธะน ะฒะพะฟัะพั ะฝะฐ ะพัะฝะพะฒะต ะฟัะตะดัะดััะธั ะพัะฒะตัะพะฒ
- ะฃะณะปัะฑะปัะตััั ะฒ ะธะฝัะตัะตัะฝัะต ัะตะผั
- ะัะพะฟััะบะฐะตั ะพัะตะฒะธะดะฝะพะต
```

---

## ๐ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ          ADAPTIVE QUESTION GENERATOR                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

INPUT:
โโ Reference Point         โ ะงัะพ ะฝัะถะฝะพ ัะทะฝะฐัั
โโ Conversation Context    โ ะััะพัะธั ะดะธะฐะปะพะณะฐ
โโ User Profile            โ ะัะพ ะพัะฒะตัะฐะตั
โโ Project Context         โ ะงัะพ ะทะฐ ะฟัะพะตะบั
โโ Qdrant Knowledge        โ ะะฐะทะฐ ะทะฝะฐะฝะธะน ะคะะ

         โ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              PROCESSING PIPELINE                         โ
โ                                                          โ
โ  1. Context Analysis      โ ะงัะพ ัะถะต ะทะฝะฐะตะผ?              โ
โ  2. Gap Identification    โ ะงะตะณะพ ะฝะต ัะฒะฐัะฐะตั?            โ
โ  3. Template Selection    โ ะะฐะบะพะน ััะธะปั ะฒะพะฟัะพัะฐ?        โ
โ  4. LLM Generation        โ ะกะพะทะดะฐัั ะฒะพะฟัะพั               โ
โ  5. Post-processing       โ ะะพะฑะฐะฒะธัั ะฟะพะดัะบะฐะทะบะธ           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

         โ

OUTPUT:
โโ Contextual Question + Hints
```

---

## ๐ ะะพะผะฟะพะฝะตะฝัั ะณะตะฝะตัะฐัะพัะฐ

### 1. Context Analyzer

```python
class ContextAnalyzer:
    """
    ะะฝะฐะปะธะทะธััะตั ัะตะบััะธะน ะบะพะฝัะตะบัั ะดะธะฐะปะพะณะฐ
    """

    def analyze(self, context: dict) -> dict:
        """
        Returns:
            {
                'project_type': 'social',       # ะขะธะฟ ะฟัะพะตะบัะฐ
                'user_level': 'beginner',       # ะฃัะพะฒะตะฝั ะฟะพะปัะทะพะฒะฐัะตะปั
                'conversation_tone': 'friendly', # ะขะพะฝ ะฑะตัะตะดั
                'mentioned_topics': [...],       # ะฃะถะต ะพะฑััะถะดะตะฝะฝัะต ัะตะผั
                'implicit_info': {...},          # ะะพัะฒะตะฝะฝะฐั ะธะฝัะพัะผะฐัะธั
                'contradictions': [],            # ะัะพัะธะฒะพัะตัะธั
            }
        """
        pass
```

**ะงัะพ ะดะตะปะฐะตั:**
- ะะปะฐััะธัะธัะธััะตั ัะธะฟ ะฟัะพะตะบัะฐ (ัะพัะธะฐะปัะฝัะน, ะบัะปััััะฝัะน, ะฝะฐััะฝัะน...)
- ะะฟัะตะดะตะปัะตั ััะพะฒะตะฝั ะฟะพะปัะทะพะฒะฐัะตะปั (ะฝะพะฒะธัะพะบ, ะพะฟััะฝัะน, ัะบัะฟะตัั)
- ะะทะฒะปะตะบะฐะตั implicit information (ะธะฝัะพัะผะฐัะธั ะผะตะถะดั ัััะพะบ)
- ะะฐัะพะดะธั ะฟัะพัะธะฒะพัะตัะธั ะฒ ะพัะฒะตัะฐั

**ะัะธะผะตั:**

```python
# ะัะฒะตั ะฟะพะปัะทะพะฒะฐัะตะปั:
"ะั ัะพัะธะผ ะฟะพะผะพะณะฐัั ะผะฝะพะณะพะดะตัะฝัะผ ัะตะผััะผ ั ะดะตััะผะธ-ะธะฝะฒะฐะปะธะดะฐะผะธ
 ะฒ ะะตะผะตัะพะฒะพ. ะฃ ะฝะฐั ัะถะต ะตััั ะพะฟัั ะฟัะพะฒะตะดะตะฝะธั ะฑะปะฐะณะพัะฒะพัะธัะตะปัะฝัั
 ะฐะบัะธะน."

# Context Analyzer ะธะทะฒะปะตะบะฐะตั:
{
    'project_type': 'social',
    'target_group': 'families_with_disabled_children',
    'location': 'Kemerovo',
    'user_level': 'intermediate',  # ะััั ะพะฟัั!
    'implicit_info': {
        'has_experience': True,
        'local_project': True,
        'vulnerable_group': True
    }
}
```

---

### 2. Gap Identifier

```python
class GapIdentifier:
    """
    ะะฟัะตะดะตะปัะตั ะฟัะพะฑะตะปั ะฒ ะธะฝัะพัะผะฐัะธะธ
    """

    def identify_gaps(
        self,
        reference_point: ReferencePoint,
        collected_info: dict
    ) -> list:
        """
        Returns ัะฟะธัะพะบ ะฟัะพะฑะตะปะพะฒ ั ะฟัะธะพัะธัะตัะฐะผะธ:
            [
                {
                    'field': 'methodology',
                    'severity': 0.9,  # 0-1, ะฝะฐัะบะพะปัะบะพ ะบัะธัะธัะฝะพ
                    'reason': 'Required by RP, not mentioned',
                    'related_to': ['tasks', 'timeline']
                },
                ...
            ]
        """
        pass
```

**ะงัะพ ะดะตะปะฐะตั:**
- ะกัะฐะฒะฝะธะฒะฐะตั RP.completion_criteria ั ัะตะบััะธะผ ัะพััะพัะฝะธะตะผ
- ะะฟัะตะดะตะปัะตั, ััะพ ะะะะขะะงะะ ะพััััััะฒัะตั
- ะะฐัะพะดะธั ัะฒัะทะฐะฝะฝัะต ะฟัะพะฑะตะปั (ะตัะปะธ ะฝะตั A, ัะพ ะธ B ะฝัะถะฝะพ ัะฟัะพัะธัั)

**ะัะธะผะตั:**

```python
# Reference Point: "ะฃะทะฝะฐัั ะผะตัะพะดะพะปะพะณะธั"
# Criteria: ['methodology', 'tasks', 'timeline']

# ะงัะพ ัะพะฑัะฐะฝะพ: {'methodology': 'ะบะพะฝััะปััะฐัะธะธ'}

# Gaps:
[
    {
        'field': 'tasks',
        'severity': 0.8,
        'reason': 'Methodology mentioned, but specific tasks unclear',
    },
    {
        'field': 'timeline',
        'severity': 0.6,
        'reason': 'When will tasks be executed?'
    }
]
```

---

### 3. Template Selector

```python
class TemplateSelector:
    """
    ะัะฑะธัะฐะตั ััะธะปั/ัะฐะฑะปะพะฝ ะฒะพะฟัะพัะฐ
    """

    def select_template(
        self,
        reference_point: ReferencePoint,
        context_analysis: dict,
        gap: dict
    ) -> str:
        """
        Returns template type:
            - 'open_ended': ะัะบััััะน ะฒะพะฟัะพั
            - 'specific_clarification': ะฃัะพัะฝะตะฝะธะต ะบะพะฝะบัะตัะธะบะธ
            - 'example_based': ะะพะฟัะพั ั ะฟัะธะผะตัะพะผ
            - 'yes_no_followup': ะะฐ/ะฝะตั + ัะณะปัะฑะปะตะฝะธะต
        """
        pass
```

**ะขะธะฟั ัะฐะฑะปะพะฝะพะฒ:**

**1. Open-ended (ะัะบััััะน):**
```
"ะะฐััะบะฐะถะธัะต, ะบะฐะบ..."
"ะะฟะธัะธัะต ะฟัะพัะตัั..."
"ะงัะพ ะฒั ะฟะปะฐะฝะธััะตัะต..."
```

**2. Specific clarification (ะะพะฝะบัะตัะธะทะฐัะธั):**
```
"ะั ัะฟะพะผัะฝัะปะธ {X}. ะฃัะพัะฝะธัะต, ะฟะพะถะฐะปัะนััะฐ..."
"ะะพะฝะบัะตัะฝะพ, ะบะฐะบะธะต ัะฐะณะธ..."
"ะกะบะพะปัะบะพ ะธะผะตะฝะฝะพ..."
```

**3. Example-based (ะก ะฟัะธะผะตัะพะผ):**
```
"ะะฐะฟัะธะผะตั, ะฑัะดัั ะปะธ ััะพ ะบะพะฝััะปััะฐัะธะธ, ะผะฐััะตั-ะบะปะฐััั
 ะธะปะธ ะผะฐัะตัะธะฐะปัะฝะฐั ะฟะพะผะพัั?"

"ะฃัะฟะตัะฝัะต ะฟัะพะตะบัั ะพะฑััะฝะพ ัะบะฐะทัะฒะฐัั 3-5 ะฐะบัะธะฒะฝะพััะตะน.
 ะะฐะบะธะต ั ะฒะฐั?"
```

**4. Yes/No + Follow-up:**
```
"ะััั ะปะธ ั ะฒะฐั ะฟะฐััะฝะตัั?"
โ ะะฐ: "ะะฐััะบะฐะถะธัะต ะฟะพะดัะพะฑะฝะตะต ะพ ะฟะฐััะฝะตัะฐั..."
โ ะะตั: "ะะปะฐะฝะธััะตัะต ะปะธ ะฟัะธะฒะปะตะบะฐัั?"
```

---

### 4. LLM Generator

```python
class LLMGenerator:
    """
    ะะตะฝะตัะธััะตั ัะธะฝะฐะปัะฝัะน ะฒะพะฟัะพั ัะตัะตะท LLM
    """

    async def generate(
        self,
        reference_point: ReferencePoint,
        context: dict,
        gap: dict,
        template_type: str,
        fpg_knowledge: dict
    ) -> str:
        """
        ะัะพะผะฟั ะดะปั LLM ั ะฟะพะปะฝัะผ ะบะพะฝัะตะบััะพะผ
        """

        prompt = f"""
ะขั - ัะบัะฟะตัั ะฟะพ ะณัะฐะฝัะพะฒัะผ ะทะฐัะฒะบะฐะผ ะคะะ, ะฟัะพะฒะพะดะธัั ะธะฝัะตัะฒัั.

ะฆะะะฌ: {reference_point.name}
ะะะะกะะะะ: {reference_point.description}

ะะะะขะะะกะข ะะะะะะขะ:
- ะขะธะฟ: {context['project_type']}
- ะฃัะพะฒะตะฝั ะทะฐัะฒะธัะตะปั: {context['user_level']}

ะงะขะ ะฃะะ ะะะกะฃะะะะ:
{self._format_history(context['history'])}

ะะะะะะ ะ ะะะคะะะะะฆะะ:
- ะะพะปะต: {gap['field']}
- ะะพัะตะผั ะฒะฐะถะฝะพ: {gap['reason']}

ะกะขะะะฌ ะะะะะะกะ: {template_type}

ะะะะ ะะะะะะ ะคะะ:
{fpg_knowledge['relevant_requirements']}

ะะะะะงะ:
ะกัะพัะผัะปะธััะน ะตััะตััะฒะตะฝะฝัะน ะฒะพะฟัะพั, ะบะพัะพััะน:
1. ะะพะผะพะถะตั ะทะฐะฟะพะปะฝะธัั ะฟัะพะฑะตะป: {gap['field']}
2. ะฃัะธััะฒะฐะตั ะฟัะตะดัะดััะธะน ะบะพะฝัะตะบัั
3. ะะดะฐะฟัะธัะพะฒะฐะฝ ะฟะพะด ััะพะฒะตะฝั {context['user_level']}
4. ะะฒััะธั ะบะฐะบ ะถะธะฒะพะน ะบะพะฝััะปััะฐะฝั, ะฐ ะฝะต ัะพัะผะฐ
5. ะัะปะธ ัะผะตััะฝะพ, ะดะฐะน ะฟะพะดัะบะฐะทะบั ะธะท ะฑะฐะทั ะคะะ

ะะะะะ:
- ะัะฟะพะปัะทัะน "ะฒั" (ัะฒะฐะถะธัะตะปัะฝะพ)
- ะะต ะดัะฑะปะธััะน ัะพ, ััะพ ัะถะต ะพะฑััะถะดะฐะปะพัั
- ะัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะพะฒะธัะพะบ - ะพะฑัััะฝะธ ัะตัะผะธะฝั

ะะะะะะก:
"""

        question = await self.llm.complete(prompt)
        return question
```

---

### 5. Post-processor

```python
class PostProcessor:
    """
    ะะฑัะฐะฑะพัะบะฐ ัะณะตะฝะตัะธัะพะฒะฐะฝะฝะพะณะพ ะฒะพะฟัะพัะฐ
    """

    def process(
        self,
        question: str,
        fpg_knowledge: dict,
        context: dict
    ) -> dict:
        """
        Returns:
            {
                'question': str,        # ะัะฝะพะฒะฝะพะน ะฒะพะฟัะพั
                'hints': [...],         # ะะพะดัะบะฐะทะบะธ
                'examples': [...],      # ะัะธะผะตัั
                'warnings': [...]       # ะัะตะดัะฟัะตะถะดะตะฝะธั
            }
        """
        pass
```

**ะงัะพ ะดะพะฑะฐะฒะปัะตั:**

1. **ะะพะฝัะตะบััะฝัะต ะฟะพะดัะบะฐะทะบะธ:**
```python
# ะะท ะฑะฐะทั ะคะะ
hint = "๐ก ะกะพะฒะตั: ะะธะฝะธะผะฐะปัะฝัะน ะฑัะดะถะตั ะดะปั ะคะะ - 500,000โฝ"

# ะะท ะฟะพัะพะถะธั ะฟัะพะตะบัะพะฒ
hint = "๐ก ะะพัะพะถะธะต ะฟัะพะตะบัั ะพะฑััะฝะพ ัะบะฐะทัะฒะฐัั 3-5 ะฐะบัะธะฒะฝะพััะตะน"
```

2. **ะัะธะผะตัั:**
```python
example = """
๐ ะัะธะผะตั ะธะท ััะฟะตัะฝะพะน ะทะฐัะฒะบะธ:
"ะัะพะตะบั ะฒะบะปััะฐะตั 4 ััะฐะฟะฐ:
1. ะะพะดะณะพัะพะฒะบะฐ (1 ะผะตััั)
2. ะะตะฐะปะธะทะฐัะธั (6 ะผะตัััะตะฒ)
3. ะัะตะฝะบะฐ ัะตะทัะปััะฐัะพะฒ (1 ะผะตััั)
4. ะะฐัะฟัะพัััะฐะฝะตะฝะธะต ะพะฟััะฐ (2 ะผะตัััะฐ)"
"""
```

3. **ะัะตะดัะฟัะตะถะดะตะฝะธั:**
```python
warning = "โ๏ธ ะะฝะธะผะฐะฝะธะต: ะคะะ ะฝะต ัะธะฝะฐะฝัะธััะตั ะบะพะผะผะตััะตัะบัั ะดะตััะตะปัะฝะพััั"
```

---

## ๐ก ะะพะฝัะตะฟััะฐะปัะฝะพะต ะทะฝะฐะฝะธะต Adaptive Generator

### ะะปััะตะฒะฐั ะธะดะตั:

> **ะะพะฝัะตะบัั โ ะะพะฟัะพั, ะฐ ะฝะต ะจะฐะฑะปะพะฝ โ ะะพะฟัะพั**

### ะคะธะปะพัะพัะธั:

1. **ะะตะฝะตัะฐัะธั, ะฝะต ะฒัะฑะพั:**
   - ะะต ะฒัะฑะธัะฐะตะผ ะธะท ัะฟะธัะบะฐ ะณะพัะพะฒัั ะฒะพะฟัะพัะพะฒ
   - ะะตะฝะตัะธััะตะผ ะะะะซะ ะฒะพะฟัะพั ะดะปั ะบะฐะถะดะพะน ัะธััะฐัะธะธ
   - ะฃะฝะธะบะฐะปัะฝัะน ะฒะพะฟัะพั ะดะปั ะบะฐะถะดะพะณะพ ัะตะปะพะฒะตะบะฐ

2. **ะะฝะพะณะพัะฐะบัะพัะฝะฐั ะฐะดะฐะฟัะฐัะธั:**
   - Reference Point (ััะพ ัะฟัะพัะธัั)
   - Context (ะฝะฐ ะพัะฝะพะฒะต ัะตะณะพ)
   - User (ะบะพะผั ะทะฐะดะฐะตะผ)
   - Knowledge (ั ะบะฐะบะธะผะธ ะฟะพะดัะบะฐะทะบะฐะผะธ)

3. **ะััะตััะฒะตะฝะฝะพััั ัะตัะตะท LLM:**
   - LLM ัะผะตะตั ะตััะตััะฒะตะฝะฝัะน ัะทัะบ
   - ะัะพะผะฟั ะดะฐะตั ะบะพะฝัะตะบัั, LLM - ัะพัะผัะปะธัะพะฒะบั
   - ะะตะทัะปััะฐั ะทะฒััะธั ะบะฐะบ ะถะธะฒะพะน ัะตะปะพะฒะตะบ

4. **ะะพััะพัะฝะฝะพะต ัะปัััะตะฝะธะต:**
   - ะะพะถะตะผ ัะปัััะธัั ะฟัะพะผะฟั โ ัะปัััะฐััั ะฒัะต ะฒะพะฟัะพัั
   - ะะพะฑะฐะฒะธัั ะฝะพะฒัะน ัะฐะบัะพั โ ะฐะฒัะพะผะฐัะธัะตัะบะธ ััะธััะฒะฐะตััั
   - ะะฑััะธัั ะฝะฐ feedback โ ััะฐะฝะพะฒะธััั ะปัััะต

---

# 3๏ธโฃ Qdrant Integration for Context

## ๐ฏ ะงัะพ ััะพ?

**Qdrant Integration** - ััะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธะต **ะฒะตะบัะพัะฝะพะน ะฑะฐะทั ะทะฝะฐะฝะธะน ะคะะ** ะดะปั ะพะฑะพะณะฐัะตะฝะธั ะบะพะฝัะตะบััะฐ ะธะฝัะตัะฒัั.

### ะะฝะฐะปะพะณะธั:

**ะะตะท Qdrant:**
```
ะะฝัะตัะฒััะตั ะทะฐะดะฐะตั ะฒะพะฟัะพัั "ะฒัะปะตะฟัั",
ะฝะต ะทะฝะฐั ััะตะฑะพะฒะฐะฝะธะน ะคะะ.

ะะฐะบ ัะบะทะฐะผะตะฝะฐัะพั, ะบะพัะพััะน ะฝะต ะฒะธะดะตะป ะฟัะพะณัะฐะผะผั ะบัััะฐ.
```

**ะก Qdrant:**
```
ะะฝัะตัะฒััะตั ะธะผะตะตั ะดะพัััะฟ ะบ ะฟะพะปะฝะพะน ะฑะฐะทะต ะทะฝะฐะฝะธะน ะคะะ:
- ะขัะตะฑะพะฒะฐะฝะธั
- ะฃัะฟะตัะฝัะต ะฟัะธะผะตัั
- ะขะธะฟะธัะฝัะต ะพัะธะฑะบะธ
- ะะตะบะพะผะตะฝะดะฐัะธะธ

ะะฐะบ ะพะฟััะฝัะน ะบะพะฝััะปััะฐะฝั ั ะฑะธะฑะปะธะพัะตะบะพะน ะบะตะนัะพะฒ.
```

---

## ๐ ะงัะพ ะฒ Qdrant?

### Collection: "knowledge_sections"

**ะกะพะดะตัะถะธะผะพะต (31 ัะตะบัะธั):**

```
1. ะขัะตะฑะพะฒะฐะฝะธั ะคะะ
   โโ ะะธะฝะธะผะฐะปัะฝัะน/ะผะฐะบัะธะผะฐะปัะฝัะน ะฑัะดะถะตั
   โโ ะะพะฟัััะธะผัะต ะบะฐัะตะณะพัะธะธ ะฟัะพะตะบัะพะฒ
   โโ ะะฐะฟัะตัะตะฝะฝัะต ะฒะธะดั ะดะตััะตะปัะฝะพััะธ
   โโ ะัะธัะตัะธะธ ะพัะตะฝะบะธ

2. ะะตัะพะดะพะปะพะณะธั ะทะฐัะฒะบะธ
   โโ ะกัััะบัััะฐ ะทะฐัะฒะบะธ
   โโ ะะฐะบ ะพะฟะธััะฒะฐัั ะฟัะพะฑะปะตะผั
   โโ ะะฐะบ ัะพัะผัะปะธัะพะฒะฐัั ัะตะปะธ
   โโ ะะฐะบ ะฟะปะฐะฝะธัะพะฒะฐัั ะฑัะดะถะตั

3. ะฃัะฟะตัะฝัะต ะฟัะธะผะตัั
   โโ ะัะพะตะบั "ะััะฝะธะบะธ ะัะทะฑะฐััะฐ" (2021)
   โโ ะัะพะตะบั "ะะธัั ะฑะตะท ะฑะพะปะธ" (2023)
   โโ ...

4. ะขะธะฟะธัะฝัะต ะพัะธะฑะบะธ
   โโ ะะฐะทะผัััะต ัะตะปะธ
   โโ ะะตัะตะฐะปะธััะธัะฝัะน ะฑัะดะถะตั
   โโ ะััััััะฒะธะต ะธะทะผะตัะธะผัั ัะตะทัะปััะฐัะพะฒ

5. ะะตะบะพะผะตะฝะดะฐัะธะธ ัะบัะฟะตััะพะฒ
   โโ ะะฐะบ ัะปัััะธัั ะทะฐัะฒะบั
   โโ ะะฐ ััะพ ะพะฑัะฐัะฐัั ะฒะฝะธะผะฐะฝะธะต
   โโ ะกะตะบัะตัั ััะฟะตัะฐ
```

**ะคะพัะผะฐั ะทะฐะฟะธัะธ:**

```python
{
    "id": 42,
    "vector": [0.123, -0.456, ...],  # 384-ะผะตัะฝัะน embedding
    "payload": {
        "section_name": "ะขัะตะฑะพะฒะฐะฝะธั ะบ ะฑัะดะถะตัั",
        "content": "ะะธะฝะธะผะฐะปัะฝัะน ัะฐะทะผะตั ะณัะฐะฝัะฐ...",
        "source_url": "https://...",
        "fund_name": "fpg",
        "category": "requirements",
        "section_type": "knowledge"
    }
}
```

---

## ๐ Use Cases

### 1. Semantic Search (ะกะตะผะฐะฝัะธัะตัะบะธะน ะฟะพะธัะบ)

**ะงัะพ ััะพ:**
ะะพะธัะบ ะฟะพ ัะผััะปั, ะฐ ะฝะต ะฟะพ ะบะปััะตะฒัะผ ัะปะพะฒะฐะผ.

**ะัะธะผะตั:**

```python
# ะะพะปัะทะพะฒะฐัะตะปั ัะบะฐะทะฐะป:
"ะฅะพัะธะผ ะฟะพััะฐัะธัั 300 ััััั ะฝะฐ ะฟะพะผะพัั ัะตะผััะผ"

# ะกะตะผะฐะฝัะธัะตัะบะธะน ะฟะพะธัะบ ะฒ Qdrant:
query = "ะผะธะฝะธะผะฐะปัะฝัะน ะฑัะดะถะตั ะคะะ"

results = qdrant.search(
    collection_name="knowledge_sections",
    query_text=query,
    limit=3
)

# ะะตะทัะปััะฐั:
[
    {
        'section': 'ะขัะตะฑะพะฒะฐะฝะธั ะบ ะฑัะดะถะตัั',
        'content': 'ะะธะฝะธะผะฐะปัะฝัะน ัะฐะทะผะตั ะณัะฐะฝัะฐ ะคะะ - 500,000โฝ',
        'score': 0.89
    },
    ...
]

# ะัะฟะพะปัะทัะตะผ ะดะปั ะฟะพะดัะบะฐะทะบะธ:
hint = "๐ก ะะธะฝะธะผะฐะปัะฝัะน ะฑัะดะถะตั ะดะปั ะคะะ - 500,000โฝ"
```

---

### 2. Contextual Hints (ะะพะฝัะตะบััะฝัะต ะฟะพะดัะบะฐะทะบะธ)

**ะงัะพ ััะพ:**
ะะพะดัะบะฐะทะบะธ ะฝะฐ ะพัะฝะพะฒะต ะบะพะฝัะตะบััะฐ ะฟัะพะตะบัะฐ.

**ะัะธะผะตั:**

```python
# Reference Point: "ะฃะทะฝะฐัั ะผะตัะพะดะพะปะพะณะธั"
# ะขะธะฟ ะฟัะพะตะบัะฐ: ัะพัะธะฐะปัะฝัะน, ัะฐะฑะพัะฐ ั ะดะตััะผะธ

# ะะพะธัะบ ะฟะพัะพะถะธั ะฟัะพะตะบัะพะฒ:
results = qdrant.search(
    query_text="ะผะตัะพะดะพะปะพะณะธั ัะพัะธะฐะปัะฝัะน ะฟัะพะตะบั ะดะตัะธ",
    limit=3
)

# ะะตะทัะปััะฐั:
[
    {
        'section': 'ะัะธะผะตั "ะััะฝะธะบะธ ะัะทะฑะฐััะฐ"',
        'content': 'ะัะพะตะบั ะฒะบะปััะฐะป 3 ััะฐะฟะฐ: ะฝะฐะฑะพั ะดะตัะตะน,
                    ะพะฑััะตะฝะธะต ัััะตะปัะฑะต, ัะพัะตะฒะฝะพะฒะฐะฝะธั...',
        'score': 0.85
    },
    ...
]

# ะคะพัะผะธััะตะผ ะฟะพะดัะบะฐะทะบั:
hint = """
๐ก ะฃัะฟะตัะฝัะต ะฟัะพะตะบัั ั ะดะตััะผะธ ะพะฑััะฝะพ ะฒะบะปััะฐัั:
- ะะฐะฑะพั/ะพัะฑะพั ััะฐััะฝะธะบะพะฒ
- ะะฑััะฐััะธะต ะผะตัะพะฟัะธััะธั
- ะัะฐะบัะธัะตัะบัั ะดะตััะตะปัะฝะพััั
- ะัะพะณะพะฒัะต ัะพะฑััะธั (ัะพัะตะฒะฝะพะฒะฐะฝะธั, ะฒัััะฐะฒะบะธ)
"""
```

---

### 3. Requirements Validation (ะัะพะฒะตัะบะฐ ััะตะฑะพะฒะฐะฝะธะน)

**ะงัะพ ััะพ:**
ะะฒัะพะผะฐัะธัะตัะบะฐั ะฟัะพะฒะตัะบะฐ ัะพะพัะฒะตัััะฒะธั ััะตะฑะพะฒะฐะฝะธัะผ ะคะะ.

**ะัะธะผะตั:**

```python
# ะะพะปัะทะพะฒะฐัะตะปั ัะบะฐะทะฐะป ะบะฐัะตะณะพัะธั:
category = "ะะพะผะผะตััะตัะบะฐั ะดะตััะตะปัะฝะพััั"

# ะัะพะฒะตัะบะฐ ะฒ Qdrant:
results = qdrant.search(
    query_text="ะทะฐะฟัะตัะตะฝะฝัะต ะบะฐัะตะณะพัะธะธ ะคะะ",
    limit=1
)

# ะะตะทัะปััะฐั:
{
    'content': 'ะคะะ ะะ ัะธะฝะฐะฝัะธััะตั ะบะพะผะผะตััะตัะบัั ะดะตััะตะปัะฝะพััั,
                ะฟะพะปะธัะธัะตัะบะธะต ะฟัะพะตะบัั, ัะตะปะธะณะธะพะทะฝัั ะฟัะพะฟะฐะณะฐะฝะดั...'
}

# ะัะตะดัะฟัะตะถะดะตะฝะธะต:
warning = """
โ๏ธ ะะฝะธะผะฐะฝะธะต!
ะคะะ ะฝะต ัะธะฝะฐะฝัะธััะตั ะบะพะผะผะตััะตัะบัั ะดะตััะตะปัะฝะพััั.

ะัะปะธ ะฒะฐั ะฟัะพะตะบั ัะพัะธะฐะปัะฝัะน, ะฝะพ ะธะผะตะตั ัะปะตะผะตะฝัั ะบะพะผะผะตััะธะธ,
ะพะฟะธัะธัะต ัะพัะธะฐะปัะฝัั ัะพััะฐะฒะปััััั ะฑะพะปะตะต ัะตัะบะพ.
"""
```

---

### 4. Dynamic Question Enrichment (ะะฑะพะณะฐัะตะฝะธะต ะฒะพะฟัะพัะพะฒ)

**ะงัะพ ััะพ:**
ะะพะฑะฐะฒะปะตะฝะธะต ะบะพะฝัะตะบััะฐ ะธะท ะฑะฐะทั ะคะะ ะฟััะผะพ ะฒ ะฒะพะฟัะพั.

**ะัะธะผะตั:**

```python
# ะะฐะทะพะฒัะน ะฒะพะฟัะพั:
base_question = "ะะฐะบะพะน ะฑัะดะถะตั ะฒั ะฟะปะฐะฝะธััะตัะต?"

# ะะพะธัะบ ะบะพะฝัะตะบััะฐ ะฒ Qdrant:
fpg_info = qdrant.search(
    query_text="ะฑัะดะถะตั ััะตะฑะพะฒะฐะฝะธั ััะฐััะธ ัะฐััะพะดะพะฒ",
    limit=1
)

# ะะฑะพะณะฐัะตะฝะฝัะน ะฒะพะฟัะพั:
enriched_question = f"""
{base_question}

๐ก ะกะพะฒะตั ะพั ัะบัะฟะตััะพะฒ ะคะะ:
{fpg_info[0]['content'][:200]}...

ะขะธะฟะธัะฝัะต ััะฐััะธ ัะฐััะพะดะพะฒ:
- ะะฟะปะฐัะฐ ัััะดะฐ (ะดะพ 40% ะฑัะดะถะตัะฐ)
- ะัะตะฝะดะฐ ะฟะพะผะตัะตะฝะธะน
- ะะฐัะตัะธะฐะปั ะธ ะพะฑะพััะดะพะฒะฐะฝะธะต
- ะะฝัะพัะผะฐัะธะพะฝะฝะพะต ะพัะฒะตัะตะฝะธะต
"""
```

---

### 5. Contradiction Detection (ะััะฒะปะตะฝะธะต ะฟัะพัะธะฒะพัะตัะธะน)

**ะงัะพ ััะพ:**
ะะพะธัะบ ะฝะตัะพะพัะฒะตัััะฒะธะน ะผะตะถะดั ะพัะฒะตัะฐะผะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะธ ััะตะฑะพะฒะฐะฝะธัะผะธ ะคะะ.

**ะัะธะผะตั:**

```python
# ะะพะปัะทะพะฒะฐัะตะปั ัะบะฐะทะฐะป:
"ะัะพะตะบั ัะฐัััะธัะฐะฝ ะฝะฐ 18 ะผะตัััะตะฒ"

# ะัะพะฒะตัะบะฐ ะฒ Qdrant:
requirements = qdrant.search(
    query_text="ะผะฐะบัะธะผะฐะปัะฝัะน ััะพะบ ะฟัะพะตะบัะฐ ะคะะ",
    limit=1
)

# ะะตะทัะปััะฐั:
{
    'content': 'ะะฐะบัะธะผะฐะปัะฝัะน ััะพะบ ัะตะฐะปะธะทะฐัะธะธ ะฟัะพะตะบัะฐ - 12 ะผะตัััะตะฒ'
}

# ะัะพัะธะฒะพัะตัะธะต ะฝะฐะนะดะตะฝะพ!
warning = """
โ๏ธ ะะฑะฝะฐััะถะตะฝะพ ะฝะตัะพะพัะฒะตัััะฒะธะต:
ะั ัะบะฐะทะฐะปะธ ััะพะบ 18 ะผะตัััะตะฒ, ะฝะพ ะคะะ ัะธะฝะฐะฝัะธััะตั ะฟัะพะตะบัั
ัะพะปัะบะพ ะดะพ 12 ะผะตัััะตะฒ.

ะะพะถะตัะต ะปะธ ะฒั ัะพะบัะฐัะธัั ััะพะบ ะธะปะธ ัะฐะทะฑะธัั ะฟัะพะตะบั ะฝะฐ ััะฐะฟั?
"""
```

---

## ๐ง ะขะตัะฝะธัะตัะบะฐั ัะตะฐะปะธะทะฐัะธั

### ะะพะดะบะปััะตะฝะธะต

```python
from qdrant_client import QdrantClient

class QdrantContextProvider:
    """
    ะัะพะฒะฐะนะดะตั ะบะพะฝัะตะบััะฐ ะธะท Qdrant
    """

    def __init__(self):
        self.client = QdrantClient(
            host="5.35.88.251",  # Production server
            port=6333,
            timeout=10
        )
        self.collection = "knowledge_sections"

    async def get_context(
        self,
        query: str,
        context_type: str = "general",
        limit: int = 3
    ) -> list:
        """
        ะะพะปััะธัั ัะตะปะตะฒะฐะฝัะฝัะน ะบะพะฝัะตะบัั

        Args:
            query: ะขะตะบัั ะทะฐะฟัะพัะฐ
            context_type: requirements | examples | recommendations
            limit: ะะพะปะธัะตััะฒะพ ัะตะทัะปััะฐัะพะฒ

        Returns:
            [
                {
                    'section_name': str,
                    'content': str,
                    'score': float,
                    'category': str
                },
                ...
            ]
        """
        # ะะพะธัะบ
        results = self.client.search(
            collection_name=self.collection,
            query_text=query,
            limit=limit
        )

        # ะคะธะปัััะฐัะธั ะฟะพ ัะธะฟั (ะตัะปะธ ะฝัะถะฝะพ)
        if context_type != "general":
            results = [
                r for r in results
                if r.payload.get('category') == context_type
            ]

        return self._format_results(results)
```

---

## ๐ก ะะพะฝัะตะฟััะฐะปัะฝะพะต ะทะฝะฐะฝะธะต Qdrant Integration

### ะะปััะตะฒะฐั ะธะดะตั:

> **ะะพะฝัะตะบัั ะธะท ะฑะฐะทั ะทะฝะฐะฝะธะน ะดะตะปะฐะตั ะฒะพะฟัะพัั ัะบัะฟะตััะฝัะผะธ**

### ะคะธะปะพัะพัะธั:

1. **ะะฝะฐะฝะธั ะบะฐะบ ัะตัะฒะธั:**
   - ะะต ัะฐัะดะบะพะดะธะผ ััะตะฑะพะฒะฐะฝะธั ะฒ ะบะพะดะต
   - ะฅัะฐะฝะธะผ ะฒ ะฒะตะบัะพัะฝะพะน ะะ
   - ะะตะณะบะพ ะพะฑะฝะพะฒะปััั, ะดะพะฑะฐะฒะปััั

2. **ะกะตะผะฐะฝัะธัะตัะบะธะน ะฟะพะธัะบ:**
   - ะะต keywords, ะฐ ัะผััะป
   - "ะผะธะฝะธะผะฐะปัะฝัะน ะฑัะดะถะตั" ะฝะฐะนะดะตั "ัะฐะทะผะตั ะณัะฐะฝัะฐ ะพั..."
   - ะะฐะฑะพัะฐะตั ั ัะธะฝะพะฝะธะผะฐะผะธ, ะฟะตัะตััะฐะทะธัะพะฒะฐะฝะธะตะผ

3. **ะัะพะฐะบัะธะฒะฝะฐั ะฟะพะผะพัั:**
   - ะะต ะถะดะตะผ ะพัะธะฑะพะบ
   - ะัะตะดัะฟัะตะถะดะฐะตะผ ะทะฐัะฐะฝะตะต
   - ะะพะดัะบะฐะทัะฒะฐะตะผ ะปัััะธะต ะฟัะฐะบัะธะบะธ

4. **ะะพััะพัะฝะฝะพะต ะพะฑะฝะพะฒะปะตะฝะธะต:**
   - ะะฐะทะฐ ะคะะ ะพะฑะฝะพะฒะปัะตััั โ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฒ ะธะฝัะตัะฒัั
   - ะะพะฒัะต ััะฟะตัะฝัะต ะฟัะพะตะบัั โ ะฝะพะฒัะต ะฟัะธะผะตัั
   - Feedback ะฟะพะปัะทะพะฒะฐัะตะปะตะน โ ัะปัััะตะฝะธะต ะฑะฐะทั

---

# 4๏ธโฃ Natural Conversation Flow

## ๐ฏ ะงัะพ ััะพ?

**Natural Conversation Flow** - ััะพ **ะฐะปะณะพัะธัะผ ัะฟัะฐะฒะปะตะฝะธั ะดะธะฐะปะพะณะพะผ**, ะบะพัะพััะน ะดะตะปะฐะตั ะธะฝัะตัะฒัั ะฟะพัะพะถะธะผ ะฝะฐ ะฑะตัะตะดั ั ะถะธะฒัะผ ะบะพะฝััะปััะฐะฝัะพะผ.

### ะะฝะฐะปะพะณะธั:

**ะขัะฐะดะธัะธะพะฝะฝะฐั ะฐะฝะบะตัะฐ:**
```
Q1 โ ะัะฒะตั โ Q2 โ ะัะฒะตั โ Q3 โ ...

ะะธะฝะตะนะฝัะน ะฟะพัะพะบ. ะะฐะบ ะพะฟัะพั ะฒ Google Forms.
```

**Natural Conversation Flow:**
```
ะะพะฟัะพั โ ะัะฒะตั
    โ
ะะฝะฐะปะธะท ะพัะฒะตัะฐ
    โ
ะะตัะตะฝะธะต:
โโ ะะพััะฐัะพัะฝะพ ะธะฝัะพัะผะฐัะธะธ โ ะกะปะตะดัััะฐั ัะตะผะฐ
โโ ะัะถะฝะพ ััะพัะฝะธัั โ Clarifying question
โโ ะะฝัะตัะตัะฝะฐั ะดะตัะฐะปั โ ะฃะณะปัะฑะธัััั
โโ ะฃะฟะพะผัะฝััะพ ะผะฝะพะณะพ โ ะัะพะฟัััะธัั ัะฒัะทะฐะฝะฝัะต ะฒะพะฟัะพัั

ะะฐะบ ะฑะตัะตะดะฐ ั ัะผะฝัะผ ัะพะฑะตัะตะดะฝะธะบะพะผ.
```

---

## ๐ ะกะพััะพัะฝะธั ะดะธะฐะปะพะณะฐ (Conversation States)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ          CONVERSATION STATE MACHINE              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

1. INIT (ะะฝะธัะธะฐะปะธะทะฐัะธั)
   โโ ะัะธะฒะตัััะฒะธะต
   โโ ะะฑัััะฝะตะฝะธะต ะฟัะพัะตััะฐ
   โโ ะกะฑะพั ะฑะฐะทะพะฒะพะน ะธะฝัะพัะผะฐัะธะธ

2. EXPLORING (ะััะปะตะดะพะฒะฐะฝะธะต)
   โโ ะะฐะดะฐะตะผ ะพัะฝะพะฒะฝัะต ะฒะพะฟัะพัั
   โโ ะกะพะฑะธัะฐะตะผ ะบะพะฝัะตะบัั ะฟัะพะตะบัะฐ
   โโ ะะฟัะตะดะตะปัะตะผ ัะธะฟ/ัะฟะตัะธัะธะบั

3. DEEPENING (ะฃะณะปัะฑะปะตะฝะธะต)
   โโ ะคะพะบัั ะฝะฐ ะบะพะฝะบัะตัะฝัั ะดะตัะฐะปัั
   โโ ะฃัะพัะฝะตะฝะธั ะฟะพ ะฟัะพะฑะตะปะฐะผ
   โโ ะัะพะฒะตัะบะฐ ะฟะพะฝะธะผะฐะฝะธั

4. VALIDATING (ะะฐะปะธะดะฐัะธั)
   โโ ะัะพะฒะตัะบะฐ ะฟัะพัะธะฒะพัะตัะธะน
   โโ ะกะพะพัะฒะตัััะฒะธะต ััะตะฑะพะฒะฐะฝะธัะผ ะคะะ
   โโ Completeness check

5. FINALIZING (ะะฐะฒะตััะตะฝะธะต)
   โโ ะัะพะณะพะฒัะน ะพะฑะทะพั
   โโ ะะพัะปะตะดะฝะธะต ะฒะพะฟัะพัั
   โโ ะะปะฐะณะพะดะฐัะฝะพััั

6. COMPLETED (ะะฐะฒะตััะตะฝะพ)
   โโ Audit ะธ ัะพััะฐะฝะตะฝะธะต
```

---

## ๐ง Conversation Manager

```python
class ConversationManager:
    """
    ะฃะฟัะฐะฒะปัะตั ะฟะพัะพะบะพะผ ัะฐะทะณะพะฒะพัะฐ
    """

    def __init__(self):
        self.state = ConversationState.INIT
        self.context = ConversationContext()
        self.rp_manager = ReferencePointManager()
        self.question_generator = AdaptiveQuestionGenerator()
        self.qdrant = QdrantContextProvider()

    async def next_turn(self) -> dict:
        """
        ะะฟัะตะดะตะปัะตั ัะปะตะดัััะธะน ัะฐะณ ะดะธะฐะปะพะณะฐ

        Returns:
            {
                'action': 'ask_question' | 'provide_hint' | 'complete',
                'content': {...}
            }
        """
        # 1. ะัะตะฝะธัั ัะตะบััะตะต ัะพััะพัะฝะธะต
        assessment = self._assess_current_state()

        # 2. ะะฟัะตะดะตะปะธัั ัะปะตะดัััะตะต ะดะตะนััะฒะธะต
        action = self._decide_next_action(assessment)

        # 3. ะัะฟะพะปะฝะธัั ะดะตะนััะฒะธะต
        if action == 'ask_question':
            return await self._generate_next_question()
        elif action == 'provide_hint':
            return await self._provide_contextual_hint()
        elif action == 'clarify':
            return await self._ask_clarification()
        elif action == 'validate':
            return await self._validate_information()
        elif action == 'complete':
            return self._finalize_interview()
```

---

## ๐ญ ะขะธะฟั ะฟะตัะตัะพะดะพะฒ (Transition Types)

### 1. Linear Transition (ะะธะฝะตะนะฝัะน ะฟะตัะตัะพะด)

**ะะพะณะดะฐ:** ะะพัะผะฐะปัะฝัะน ะฟัะพะณัะตัั, ะฒัะต ะฟะพะฝััะฝะพ

```
RP1: "ะะพะฝััั ัััั" โ Complete
    โ
RP2: "ะะฟัะตะดะตะปะธัั ะฟัะพะฑะปะตะผั" โ Ask question
```

### 2. Skip Transition (ะัะพะฟััะบ)

**ะะพะณะดะฐ:** ะะฝัะพัะผะฐัะธั ัะถะต ัะพะฑัะฐะฝะฐ ะบะพัะฒะตะฝะฝะพ

```python
# ะะพะปัะทะพะฒะฐัะตะปั ะพัะฒะตัะธะป:
"ะั - ะบะพะผะฐะฝะดะฐ ะธะท 5 ัะตะปะพะฒะตะบ: 2 ะฟัะธัะพะปะพะณะฐ, 2 ัะพััะฐะฑะพัะฝะธะบะฐ ะธ ั - ะบะพะพัะดะธะฝะฐัะพั"

# ะะทะฒะปะตะบะฐะตะผ:
- team_size: 5
- team_roles: [ะฟัะธัะพะปะพะณ, ัะพััะฐะฑะพัะฝะธะบ, ะบะพะพัะดะธะฝะฐัะพั]
- user_role: ะบะพะพัะดะธะฝะฐัะพั

# ะะตัะตะฝะธะต:
RP7: "ะะพะฝััั ะบะพะผะฐะฝะดั" โ SKIP (ัะถะต ะตััั ะธะฝัะพัะผะฐัะธั)
```

### 3. Loop-back Transition (ะะพะทะฒัะฐั)

**ะะพะณะดะฐ:** ะัะถะฝะพ ััะพัะฝะธัั ะฟัะตะดัะดัััั ะธะฝัะพัะผะฐัะธั

```python
# ะ RP5 (ะฑัะดะถะตั) ะพะฑะฝะฐััะถะธะปะธ ะฟัะพัะธะฒะพัะตัะธะต
# ะะตัะฝััััั ะบ RP4 (ะผะตัะพะดะพะปะพะณะธั) ะดะปั ััะพัะฝะตะฝะธั

RP5: "ะัะตะฝะธัั ะฑัะดะถะตั" โ Detected contradiction
    โ
RP4: "ะฃะทะฝะฐัั ะผะตัะพะดะพะปะพะณะธั" โ Ask clarification
    โ
RP5: "ะัะตะฝะธัั ะฑัะดะถะตั" โ Continue
```

### 4. Deep-dive Transition (ะฃะณะปัะฑะปะตะฝะธะต)

**ะะพะณะดะฐ:** ะะฝัะตัะตัะฝะฐั ัะตะผะฐ, ะฝัะถะฝะพ ะฑะพะปััะต ะดะตัะฐะปะตะน

```python
# ะะพะปัะทะพะฒะฐัะตะปั ัะฟะพะผัะฝัะป ะธะฝะฝะพะฒะฐัะธะพะฝะฝัะน ะฟะพะดัะพะด
user_answer = "ะั ะธัะฟะพะปัะทัะตะผ ะฐัั-ัะตัะฐะฟะธั ะดะปั ัะฐะฑะพัั ั ััะฐะฒะผะพะน"

# ะะพะฝัะตะบัั ะธะท Qdrant: "ะฐัั-ัะตัะฐะฟะธั" - ัะตะดะบะธะน, ะฝะพ ัััะตะบัะธะฒะฝัะน ะผะตัะพะด

# ะะตัะตะฝะธะต: ะฃะณะปัะฑะธัััั!
action = "deep_dive"
question = "ะะฐััะบะฐะถะธัะต ะฟะพะดัะพะฑะฝะตะต ะฟัะพ ะฐัั-ัะตัะฐะฟะธั. ะะฐะบะธะต ะบะพะฝะบัะตัะฝะพ
            ัะตัะฝะธะบะธ ะฒั ะธัะฟะพะปัะทัะตัะต?"
```

### 5. Fast-forward Transition (ะฃัะบะพัะตะฝะธะต)

**ะะพะณะดะฐ:** ะะพะปัะทะพะฒะฐัะตะปั ะดะฐะป ะพัะตะฝั ะฟะพะปะฝัะน ะพัะฒะตั

```python
# ะัะตะฝั ะดะตัะฐะปัะฝัะน ะพัะฒะตั ะพัะฒะฐัะธะป ะฝะตัะบะพะปัะบะพ RP
user_answer = """
ะั ะฟัะพะฒะพะดะธะผ ะบะพะผะฟะปะตะบัะฝัั ะฟัะพะณัะฐะผะผั ะฟะพะดะดะตัะถะบะธ ัะตะผะตะน.
ะญัะฐะฟ 1: ะะธะฐะณะฝะพััะธะบะฐ ะฟะพััะตะฑะฝะพััะตะน (1 ะผะตั)
ะญัะฐะฟ 2: ะะฝะดะธะฒะธะดัะฐะปัะฝัะต ะบะพะฝััะปััะฐัะธะธ (3 ะผะตั)
ะญัะฐะฟ 3: ะััะฟะฟะพะฒัะต ะทะฐะฝััะธั (3 ะผะตั)
ะญัะฐะฟ 4: ะัะตะฝะบะฐ ัะตะทัะปััะฐัะพะฒ (1 ะผะตั)

ะัะดะถะตั: 800,000โฝ
- ะะฐัะฟะปะฐัะฐ ัะฟะตัะธะฐะปะธััะพะฒ: 400,000โฝ
- ะะฐัะตัะธะฐะปั: 200,000โฝ
- ะัะตะฝะดะฐ: 150,000โฝ
- ะัะพัะตะต: 50,000โฝ
"""

# ะะทะฒะปะตะบะปะธ:
- methodology โ
- timeline โ
- budget_total โ
- budget_breakdown โ

# ะะตัะตะฝะธะต: Fast-forward ัะตัะตะท RP4, RP5!
RP4, RP5 โ COMPLETE (ะฐะฒัะพะผะฐัะธัะตัะบะธ)
RP6 โ Ask question (ัะปะตะดัััะธะน)
```

---

## ๐ฏ Decision Logic (ะะพะณะธะบะฐ ะฟัะธะฝััะธั ัะตัะตะฝะธะน)

```python
class ConversationDecisionEngine:
    """
    ะัะธะฝะธะผะฐะตั ัะตัะตะฝะธั ะพ ัะปะตะดัััะตะผ ัะฐะณะต
    """

    def decide_next_action(
        self,
        context: ConversationContext,
        assessment: dict
    ) -> str:
        """
        ะะพะณะธะบะฐ ะฟัะธะฝััะธั ัะตัะตะฝะธั
        """

        # 1. ะัะพะฒะตัะบะฐ ะปะธะผะธัะพะฒ
        if context.questions_asked >= 20:
            return "finalize"  # ะะพััะธะณะปะธ ะปะธะผะธัะฐ

        # 2. ะัะพะฒะตัะบะฐ ะทะฐะฒะตััะตะฝะฝะพััะธ
        if all(rp.is_complete() for rp in self.required_rps):
            return "finalize"  # ะัะต ัะพะฑัะฐะปะธ!

        # 3. ะัะพะฒะตัะบะฐ ะฟัะพัะธะฒะพัะตัะธะน
        if assessment['has_contradictions']:
            return "clarify"  # ะัะถะฝะพ ััะพัะฝะธัั

        # 4. ะัะพะฒะตัะบะฐ ัะพะพัะฒะตัััะฒะธั ะคะะ
        if assessment['fpg_violations']:
            return "provide_hint"  # ะะพะดัะบะฐะทะบะฐ ะพ ััะตะฑะพะฒะฐะฝะธัั

        # 5. ะัะพะฒะตัะบะฐ ะฟัะพะฑะตะปะพะฒ
        critical_gaps = assessment['gaps']['critical']
        if critical_gaps:
            return "ask_question"  # ะะฐะดะฐัั ะฒะพะฟัะพั

        # 6. ะัะพะฒะตัะบะฐ ะฝะตะพะฑัะทะฐัะตะปัะฝัั RP
        optional_incomplete = [
            rp for rp in self.optional_rps
            if not rp.is_complete()
        ]

        if optional_incomplete and context.questions_asked < 18:
            return "ask_question"  # ะัะต ะตััั ะฒัะตะผั

        # 7. ะัะต ะณะพัะพะฒะพ
        return "finalize"
```

---

## ๐ฃ Conversational Patterns (ะะฐััะตัะฝั ะฑะตัะตะดั)

### Pattern 1: Acknowledgment + Follow-up

**ะงัะพ:** ะัะธะทะฝะฐัั ะพัะฒะตั + ะทะฐะดะฐัั ัะปะตะดัััะธะน ะฒะพะฟัะพั

```
User: "ะั ัะพัะธะผ ะฟะพะผะพะณะฐัั ะผะฝะพะณะพะดะตัะฝัะผ ัะตะผััะผ"
AI: "ะัะปะธัะฝะพ! ะะพะผะพัั ะผะฝะพะณะพะดะตัะฝัะผ ัะตะผััะผ - ะฒะฐะถะฝะฐั ัะตะผะฐ.
     ะ ะบะฐะบัั ะบะพะฝะบัะตัะฝัั ะฟัะพะฑะปะตะผั ััะธั ัะตะผะตะน ะฒั ัะตัะฐะตัะต?
     ะะฐะฟัะธะผะตั, ะฝะตัะฒะฐัะบะฐ ะดะตััะบะธั ัะพะฒะฐัะพะฒ, ะพััััััะฒะธะต ะฟัะธัะพะปะพะณะธัะตัะบะพะน
     ะฟะพะดะดะตัะถะบะธ ะธะปะธ ััะพ-ัะพ ะตัะต?"
```

### Pattern 2: Reflection + Clarification

**ะงัะพ:** ะััะฐะทะธัั ะฟะพะฝะธะผะฐะฝะธะต + ััะพัะฝะธัั

```
User: "ะัะดะตะผ ะฟัะพะฒะพะดะธัั ะผะฐััะตั-ะบะปะฐััั"
AI: "ะัะปะธ ั ะฟัะฐะฒะธะปัะฝะพ ะฟะพะฝะธะผะฐั, ะฒั ะฟะปะฐะฝะธััะตัะต ะพะฑัะฐะทะพะฒะฐัะตะปัะฝัะต
     ะผะตัะพะฟัะธััะธั ะฒ ัะพัะผะฐัะต ะผะฐััะตั-ะบะปะฐััะพะฒ.
     ะฃัะพัะฝะธัะต, ะฟะพะถะฐะปัะนััะฐ: ะบะฐะบะธะต ะบะพะฝะบัะตัะฝะพ ัะตะผั ะฑัะดัั ะพัะฒะฐัะตะฝั
     ะธ ัะบะพะปัะบะพ ะผะฐััะตั-ะบะปะฐััะพะฒ ะฟะปะฐะฝะธััะตัะต ะฟัะพะฒะตััะธ?"
```

### Pattern 3: Context + Hint

**ะงัะพ:** ะะพะฝัะตะบัั ะธะท ะฟัะตะดัะดััะตะณะพ + ะฟะพะดัะบะฐะทะบะฐ

```
User: "ะัะดะถะตั ะฟัะธะผะตัะฝะพ 300 ััััั"
AI: "ะั ัะฟะพะผัะฝัะปะธ ะฑัะดะถะตั 300,000โฝ. ะะฑัะฐัะธัะต ะฒะฝะธะผะฐะฝะธะต:

     ๐ก ะะธะฝะธะผะฐะปัะฝัะน ะณัะฐะฝั ะคะะ ัะพััะฐะฒะปัะตั 500,000โฝ.

     ะะพะถะตัะต ะปะธ ะฒั ัะฐััะธัะธัั ะฟัะพะตะบั, ััะพะฑั ะฑัะดะถะตั ัะพะพัะฒะตัััะฒะพะฒะฐะป
     ััะตะฑะพะฒะฐะฝะธัะผ, ะธะปะธ ัะฐััะผะพััะตัั ะดััะณะธะต ัะพะฝะดั ะดะปั ะผะตะฝััะธั ััะผะผ?"
```

### Pattern 4: Example-driven Question

**ะงัะพ:** ะะพะฟัะพั ั ะฟัะธะผะตัะฐะผะธ ะดะปั ััะฝะพััะธ

```
AI: "ะะฟะธัะธัะต, ะบะฐะบะธะต ัะตะทัะปััะฐัั ะฒั ะพะถะธะดะฐะตัะต ะฟะพะปััะธัั?

     ะะฐะฟัะธะผะตั, ััะฟะตัะฝัะต ะฟัะพะตะบัั ัะบะฐะทัะฒะฐัั ะธะทะผะตัะธะผัะต ัะตะทัะปััะฐัั:
     - 'ะะฑััะตะฝะพ 50 ัะตะปะพะฒะตะบ'
     - 'ะัะพะฒะตะดะตะฝะพ 20 ะผะตัะพะฟัะธััะธะน'
     - 'ะัะฒะฐัะตะฝะพ 200 ัะตะผะตะน'

     ะะฐะบะธะต ะบะพะฝะบัะตัะฝัะต ัะตะทัะปััะฐัั ะฑัะดัั ั ะฒะฐั?"
```

### Pattern 5: Open โ Narrow

**ะงัะพ:** ะกะฝะฐัะฐะปะฐ ัะธัะพะบะธะน ะฒะพะฟัะพั, ะฟะพัะพะผ ะบะพะฝะบัะตัะธะทะฐัะธั

```
AI: "ะะฐััะบะฐะถะธัะต ะพ ะฒะฐัะตะน ะบะพะผะฐะฝะดะต."

User: "ะะฐั ััะพะต"

AI: "ะฅะพัะพัะพ. ะะฐะบะธะต ัะพะปะธ ะฒัะฟะพะปะฝัะตั ะบะฐะถะดัะน ะธะท ะฒะฐั?
     ะัะพ ะพัะฒะตัะฐะตั ะทะฐ ะพัะณะฐะฝะธะทะฐัะธั, ะบัะพ ะทะฐ ัะบัะฟะตััะฝัั ัะฐััั?"
```

---

## ๐ก ะะพะฝัะตะฟััะฐะปัะฝะพะต ะทะฝะฐะฝะธะต Natural Flow

### ะะปััะตะฒะฐั ะธะดะตั:

> **ะะดะฐะฟัะธะฒะฝัะน ะฟะพัะพะบ, ะฐ ะฝะต ัะธะบัะธัะพะฒะฐะฝะฝัะน ััะตะฝะฐัะธะน**

### ะคะธะปะพัะพัะธั:

1. **ะกะพััะพัะฝะธะต, ะฝะต ัะฐะณะธ:**
   - ะะต "ะจะฐะณ 7 ะธะท 15"
   - ะ "ะััะปะตะดัะตะผ ะผะตัะพะดะพะปะพะณะธั" (ัะพััะพัะฝะธะต)

2. **ะะพะฝัะตะบััะฝัะต ะฟะตัะตัะพะดั:**
   - ะกะปะตะดัััะธะน ัะฐะณ ะทะฐะฒะธัะธั ะพั ัะตะบััะตะณะพ ะบะพะฝัะตะบััะฐ
   - ะะตั ะทะฐัะฐะฝะตะต ะพะฟัะตะดะตะปะตะฝะฝะพะณะพ ะฟััะธ
   - ะะฐะถะดัะน ะดะธะฐะปะพะณ ัะฝะธะบะฐะปะตะฝ

3. **ะััะตััะฒะตะฝะฝะพััั ัะตัะตะท ะฟะฐััะตัะฝั:**
   - Acknowledgment (ะฟัะธะทะฝะฐะฝะธะต)
   - Reflection (ะพััะฐะถะตะฝะธะต)
   - Clarification (ััะพัะฝะตะฝะธะต)
   - ะะฐะบ ะถะธะฒะพะน ะบะพะฝััะปััะฐะฝั

4. **ะญััะตะบัะธะฒะฝะพััั ัะตัะตะท ะฟัะพะฟััะบะธ:**
   - ะัะปะธ ัะถะต ะพัะฒะตัะธะปะธ - ะฝะต ัะฟัะฐัะธะฒะฐัั ัะฝะพะฒะฐ
   - ะัะปะธ ะพัะตะฒะธะดะฝะพ - ะฟัะพะฟัััะธัั
   - ะคะพะบัั ะฝะฐ ะฟัะพะฑะตะปะฐั

---

## ๐ ะคะธะฝะฐะปัะฝัะน ะพะฑะทะพั ัะธััะตะผั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ           ADAPTIVE INTERVIEWER SYSTEM                    โ
โ                                                          โ
โ  [Reference Points] โ ะงัะพ ัะทะฝะฐัั                        โ
โ         โ                                               โ
โ  [Adaptive Generator] โ ะะฐะบ ัะฟัะพัะธัั                    โ
โ         โ                                               โ
โ  [Qdrant Context] โ ะก ะบะฐะบะธะผะธ ะฟะพะดัะบะฐะทะบะฐะผะธ                โ
โ         โ                                               โ
โ  [Natural Flow] โ ะฃะฟัะฐะฒะปะตะฝะธะต ะดะธะฐะปะพะณะพะผ                   โ
โ         โ                                               โ
โ  [User Answer] โ ะะฑัะฐัะฝะฐั ัะฒัะทั                         โ
โ         โ                                               โ
โ  [Context Update] โ ะะฑะฝะพะฒะปะตะฝะธะต ัะพััะพัะฝะธั                โ
โ         โ                                               โ
โ  [Decision] โ ะงัะพ ะดะฐะปััะต?                               โ
โ      โโ Next RP                                         โ
โ      โโ Clarify                                         โ
โ      โโ Deep-dive                                       โ
โ      โโ Complete                                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

**ะะพัะพะฒะพ! ะัั ะบะพะฝัะตะฟัะธั ัะฐัะฟะธัะฐะฝะฐ!** ๐

**ะกะพะทะดะฐะฝะพ:** 2025-10-20
**ะะปั:** ะะพะปะฝะฐั ะฟะตัะตะดะตะปะบะฐ ะธะฝัะตัะฒััะตัะฐ (ะะฐัะธะฐะฝั 1)
