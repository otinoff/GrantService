# Iteration 38: Synthetic Anketa Corpus Generator

**Date:** 2025-10-25
**Priority:** üî• CRITICAL (Sber500 Bootcamp!)
**Status:** üìã PLANNING
**Objective:** –°–æ–∑–¥–∞—Ç—å –∫–æ—Ä–ø—É—Å –∏–∑ 100 —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∫–µ—Ç –∏ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å ~350K GigaChat Max —Ç–æ–∫–µ–Ω–æ–≤

---

## üéØ –ì–õ–ê–í–ù–ê–Ø –¶–ï–õ–¨

### –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ:

**–ö–†–ò–¢–ò–ß–ù–û –¥–ª—è Sber500 Bootcamp:**
> "–û—Ü–µ–Ω–∫–∞ —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ GigaChat"
> ‚Äî –∏–∑ GIGACHAT_SWITCH_PLAN.md

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –£ –Ω–∞—Å **1,987,948 —Ç–æ–∫–µ–Ω–æ–≤ GigaChat Max**
- –ú—ã –∏—Ö **–ù–ï –¢–†–ê–¢–ò–ú** - –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–¥–ø–∏—Å–∫—É Lite! ‚ùå
- **Sber –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ç–æ–∫–µ–Ω–æ–≤ Max!** üéØ

**–†–µ—à–µ–Ω–∏–µ:**
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º 100 —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∫–µ—Ç —á–µ—Ä–µ–∑ **GigaChat Lite** (–¥—ë—à–µ–≤–æ)
- –ê—É–¥–∏—Ç–∏—Ä—É–µ–º –∏—Ö —á–µ—Ä–µ–∑ **GigaChat Max** (–¥–æ—Ä–æ–≥–æ, –Ω–æ —ç—Ç–æ –∏ –Ω—É–∂–Ω–æ!)
- **–¢—Ä–∞—Ç–∏–º ~350K —Ç–æ–∫–µ–Ω–æ–≤ Max –∑–∞ –æ–¥–Ω—É –∏—Ç–µ—Ä–∞—Ü–∏—é**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º Sber'—É –∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**–ë–æ–Ω—É—Å—ã:**
1. ‚úÖ –°–æ–∑–¥–∞—ë–º –∫–æ—Ä–ø—É—Å –¥–∞–Ω–Ω—ã—Ö –¥–ª—è RL (reinforcement learning)
2. ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º AnketaValidator –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–∞—Ö –∞–Ω–∫–µ—Ç
3. ‚úÖ –°–æ–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –æ—Ü–µ–Ω–æ–∫ (7-10/10 —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)
4. ‚úÖ –î–æ–∫–∞–∑—ã–≤–∞–µ–º —Ü–µ–Ω–Ω–æ—Å—Ç—å GigaChat Max –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞

---

## üìä –û–¶–ï–ù–ö–ê –¢–û–ö–ï–ù–û–í

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–Ω–∫–µ—Ç (GigaChat Lite):
```
1 –∞–Ω–∫–µ—Ç–∞ = ~1,500 —Ç–æ–∫–µ–Ω–æ–≤ Lite
100 –∞–Ω–∫–µ—Ç = ~150,000 —Ç–æ–∫–µ–Ω–æ–≤ Lite
```
**–°—Ç–æ–∏–º–æ—Å—Ç—å:** –ü–æ—á—Ç–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ! –£ –Ω–∞—Å 703K Lite —Ç–æ–∫–µ–Ω–æ–≤ –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ

### –ê—É–¥–∏—Ç –∞–Ω–∫–µ—Ç (GigaChat Max):
```
1 –∞—É–¥–∏—Ç = ~2,000 —Ç–æ–∫–µ–Ω–æ–≤ Max (LLM coherence check)
100 –∞—É–¥–∏—Ç–æ–≤ = ~200,000 —Ç–æ–∫–µ–Ω–æ–≤ Max
```
**–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~10% –æ—Ç –Ω–∞—à–µ–≥–æ –ª–∏–º–∏—Ç–∞ Max

### Embeddings (Qdrant + GigaChat):
```
1 –∞–Ω–∫–µ—Ç–∞ embedding = ~100 —Ç–æ–∫–µ–Ω–æ–≤ Embeddings
100 –∞–Ω–∫–µ—Ç embeddings = ~10,000 —Ç–æ–∫–µ–Ω–æ–≤ Embeddings
–ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö (100 –∑–∞–ø—Ä–æ—Å–æ–≤) = ~10,000 —Ç–æ–∫–µ–Ω–æ–≤ Embeddings
```
**–°—Ç–æ–∏–º–æ—Å—Ç—å:** –û—á–µ–Ω—å –¥—ë—à–µ–≤–æ! –£ –Ω–∞—Å 5M Embeddings —Ç–æ–∫–µ–Ω–æ–≤

### –ò–¢–û–ì–û –Ω–∞ 1 –ø—Ä–æ–≥–æ–Ω:
```
Lite:       ~150K —Ç–æ–∫–µ–Ω–æ–≤ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
Max:        ~200K —Ç–æ–∫–µ–Ω–æ–≤ (–∞—É–¥–∏—Ç)
Embeddings: ~20K —Ç–æ–∫–µ–Ω–æ–≤  (–≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è + –ø–æ–∏—Å–∫)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
TOTAL:      ~370K —Ç–æ–∫–µ–Ω–æ–≤
```

**–ú–æ–∂–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å 5-6 —Ä–∞–∑** –∏ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –ø–æ—á—Ç–∏ –í–°–ï —Ç–æ–∫–µ–Ω—ã Max!

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –†–ï–®–ï–ù–ò–Ø

### –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **AnketaSyntheticGenerator** (`agents/anketa_synthetic_generator.py`)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç GigaChat Lite –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
   - –û—Å–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –∏–∑ –ë–î
   - –°–æ–∑–¥–∞—ë—Ç –∞–Ω–∫–µ—Ç—ã —Ä–∞–∑–Ω–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ (low/medium/high)

2. **–ö–æ–º–∞–Ω–¥—ã –≤ Telegram Bot:**
   - `/generate_synthetic_anketa [count] [quality]` - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
   - `/batch_audit_anketas [count]` - batch –∞—É–¥–∏—Ç
   - `/corpus_stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä–ø—É—Å–∞

3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - –ü–æ–º–µ—á–∞–µ–º —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –∞–Ω–∫–µ—Ç—ã —Ñ–ª–∞–≥–æ–º `synthetic=true`
   - –•—Ä–∞–Ω–∏–º target quality level
   - –õ–æ–≥–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞—É–¥–∏—Ç–∞

4. **–û—Ç—á—ë—Ç—ã:**
   - CSV —ç–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ—Ü–µ–Ω–æ–∫
   - –î–∞—à–±–æ—Ä–¥ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô –ü–õ–ê–ù

### Phase 1: AnketaSyntheticGenerator (1 —á–∞—Å)

**–°–æ–∑–¥–∞—Ç—å:** `agents/anketa_synthetic_generator.py` (~200 lines)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
```python
class AnketaSyntheticGenerator:
    """
    –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∫–µ—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—Ä–ø—É—Å–∞

    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç:
    - GigaChat Lite –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (—ç–∫–æ–Ω–æ–º–∏—è!)
    - –†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –ë–î –∫–∞–∫ —à–∞–±–ª–æ–Ω—ã
    - –í–∞—Ä–∏–∞—Ü–∏–∏ –ø–æ —Ä–µ–≥–∏–æ–Ω—É, —Ç–µ–º–µ, –∫–∞—á–µ—Å—Ç–≤—É
    """

    async def generate_synthetic_anketa(
        self,
        template_anketas: List[Dict],
        quality_level: str = 'medium',  # low/medium/high
        topic: str = None,
        region: str = None
    ) -> Dict:
        """
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 1 —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫—É—é –∞–Ω–∫–µ—Ç—É

        Returns:
            {
                'project_name': '...',
                'organization': '...',
                'region': '...',
                'problem': '...',
                'solution': '...',
                'goals': [...],
                'activities': [...],
                'results': [...],
                'budget': '...',
                'budget_breakdown': {...},
                'synthetic': True,
                'quality_target': 'medium'
            }
        """

    async def generate_batch(
        self,
        count: int = 10,
        quality_distribution: Dict = None
    ) -> List[Dict]:
        """
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç batch –∞–Ω–∫–µ—Ç

        Args:
            count: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–Ω–∫–µ—Ç (1-100)
            quality_distribution: {
                'low': 0.2,    # 20% low quality
                'medium': 0.5, # 50% medium
                'high': 0.3    # 30% high
            }
        """
```

**–ü—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:**
```python
SYNTHETIC_ANKETA_PROMPT = """
–¢—ã - —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –≥—Ä–∞–Ω—Ç–æ–≤—ã–º –∑–∞—è–≤–∫–∞–º –§–æ–Ω–¥–∞ –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç—Å–∫–∏—Ö –≥—Ä–∞–Ω—Ç–æ–≤ (–§–ü–ì).

–ó–∞–¥–∞—á–∞: –°–æ–∑–¥–∞–π —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—É—é –∞–Ω–∫–µ—Ç—É –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

–ü–†–ò–ú–ï–†–´ —É—Å–ø–µ—à–Ω—ã—Ö –∞–Ω–∫–µ—Ç –§–ü–ì:
{template_anketas}

–¢–†–ï–ë–û–í–ê–ù–ò–Ø –∫ –Ω–æ–≤–æ–π –∞–Ω–∫–µ—Ç–µ:
- –¢–µ–º–∞: {topic or '—Å–æ—Ü–∏–∞–ª—å–Ω–æ –∑–Ω–∞—á–∏–º—ã–π –ø—Ä–æ–µ–∫—Ç'}
- –†–µ–≥–∏–æ–Ω: {region or '–ª—é–±–æ–π —Ä–µ–≥–∏–æ–Ω –†–æ—Å—Å–∏–∏'}
- –¶–µ–ª–µ–≤–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ: {quality_level}

–¶–µ–ª–µ–≤–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- LOW (4-6/10): –ë–∞–∑–æ–≤–∞—è –∞–Ω–∫–µ—Ç–∞ —Å —è–≤–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏:
  * –†–∞–∑–º—ã—Ç–∞—è —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã
  * –ù–µ—á—ë—Ç–∫–∏–µ —Ü–µ–ª–∏
  * –ù–µ–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
  * –ù–æ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

- MEDIUM (6-8/10): –•–æ—Ä–æ—à–∞—è –∞–Ω–∫–µ—Ç–∞ —Å –Ω–µ–±–æ–ª—å—à–∏–º–∏ –Ω–µ–¥–æ—á—ë—Ç–∞–º–∏:
  * –ü–æ–Ω—è—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞, –Ω–æ –º–æ–∂–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–µ–µ
  * –ê–¥–µ–∫–≤–∞—Ç–Ω—ã–µ —Ü–µ–ª–∏ –∏ –∑–∞–¥–∞—á–∏
  * –ò–∑–º–µ—Ä–∏–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
  * –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –±—é–¥–∂–µ—Ç

- HIGH (8-10/10): –û—Ç–ª–∏—á–Ω–∞—è –∞–Ω–∫–µ—Ç–∞:
  * –ß—ë—Ç–∫–æ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ñ–∞–∫—Ç–∞–º–∏
  * SMART —Ü–µ–ª–∏
  * –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∏–∑–º–µ—Ä–∏–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
  * –û–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –±—é–¥–∂–µ—Ç
  * –ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥

–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:
1. –ê–Ω–∫–µ—Ç–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –£–ù–ò–ö–ê–õ–¨–ù–û–ô (–Ω–µ –∫–æ–ø–∏—è –ø—Ä–∏–º–µ—Ä–æ–≤!)
2. –í—Å–µ 15 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
3. –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç (–Ω–µ —Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞)
4. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç—É –§–ü–ì

–í–µ—Ä–Ω–∏ JSON:
{
    "project_name": "...",
    "organization": "...",
    "region": "...",
    "problem": "...",
    "solution": "...",
    "goals": ["...", "..."],
    "activities": ["...", "..."],
    "results": ["...", "..."],
    "budget": "...",
    "budget_breakdown": {
        "equipment": "...",
        "teachers": "...",
        "materials": "...",
        "other": "..."
    }
}
"""
```

---

### Phase 2: Telegram Commands (1 —á–∞—Å)

**–î–æ–±–∞–≤–∏—Ç—å –≤:** `telegram-bot/handlers/anketa_management_handler.py`

#### –ö–æ–º–∞–Ω–¥–∞ 1: `/generate_synthetic_anketa`

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```
/generate_synthetic_anketa [count] [quality]

–ü—Ä–∏–º–µ—Ä—ã:
/generate_synthetic_anketa              ‚Üí 1 –∞–Ω–∫–µ—Ç–∞ medium
/generate_synthetic_anketa 10           ‚Üí 10 –∞–Ω–∫–µ—Ç medium
/generate_synthetic_anketa 50 low       ‚Üí 50 –∞–Ω–∫–µ—Ç low quality
/generate_synthetic_anketa 30 high      ‚Üí 30 –∞–Ω–∫–µ—Ç high quality
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
```python
async def generate_synthetic_anketa(self, update, context):
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –∞–Ω–∫–µ—Ç—ã –¥–ª—è –∫–æ—Ä–ø—É—Å–∞

    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç:
    - GigaChat Lite –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (—ç–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤)
    - –†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –ë–î
    - –†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –∫–∞—á–µ—Å—Ç–≤–∞
    """

    # 1. Parse arguments
    count = int(args[0]) if args else 1
    quality = args[1] if len(args) > 1 else 'medium'

    # 2. Validate
    if count > 100:
        await update.message.reply_text("‚ùå –ú–∞–∫—Å–∏–º—É–º 100 –∞–Ω–∫–µ—Ç –∑–∞ —Ä–∞–∑")
        return

    # 3. Get templates from DB
    templates = self.db.get_approved_anketas(limit=5)

    # 4. Generate
    generator = AnketaSyntheticGenerator(
        db=self.db,
        llm_provider='gigachat-lite'  # ‚Üê LITE –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏!
    )

    await update.message.reply_text(
        f"üîÑ –ì–µ–Ω–µ—Ä–∏—Ä—É—é {count} —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∫–µ—Ç (–∫–∞—á–µ—Å—Ç–≤–æ: {quality})...\n"
        f"–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è GigaChat Lite –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤\n"
        f"‚è± –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è: {count * 3} —Å–µ–∫—É–Ω–¥"
    )

    generated = []
    for i in range(count):
        anketa = await generator.generate_synthetic_anketa(
            template_anketas=templates,
            quality_level=quality
        )

        # Save to DB
        anketa_id = self.db.save_synthetic_anketa(
            user_id=user_id,
            anketa_data=anketa,
            quality_target=quality
        )

        # –í–ê–ñ–ù–û: –î–æ–±–∞–≤–∏—Ç—å –≤ Qdrant –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö
        await self._add_to_qdrant(anketa_id, anketa)

        generated.append(anketa_id)

        # Progress update every 10
        if (i + 1) % 10 == 0:
            await update.message.reply_text(f"‚è≥ –ü—Ä–æ–≥—Ä–µ—Å—Å: {i+1}/{count}")

    # 5. Result
    await update.message.reply_text(
        f"‚úÖ –°–æ–∑–¥–∞–Ω–æ {len(generated)} —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∫–µ—Ç!\n\n"
        f"üìä –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–∞—á–µ—Å—Ç–≤—É:\n"
        f"‚Ä¢ –¶–µ–ª–µ–≤–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ: {quality}\n\n"
        f"–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /batch_audit_anketas –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞"
    )
```

#### –ö–æ–º–∞–Ω–¥–∞ 2: `/batch_audit_anketas`

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```
/batch_audit_anketas [count] [filter]

–ü—Ä–∏–º–µ—Ä—ã:
/batch_audit_anketas              ‚Üí –ê—É–¥–∏—Ç 10 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö synthetic
/batch_audit_anketas 50           ‚Üí –ê—É–¥–∏—Ç 50 synthetic
/batch_audit_anketas 20 all       ‚Üí –ê—É–¥–∏—Ç 20 –ª—é–±—ã—Ö –∞–Ω–∫–µ—Ç
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
```python
async def batch_audit_anketas(self, update, context):
    """
    Batch –∞—É–¥–∏—Ç –∞–Ω–∫–µ—Ç —á–µ—Ä–µ–∑ AnketaValidator

    –í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç GigaChat Max –¥–ª—è —Ç–æ—á–Ω–æ–π –æ—Ü–µ–Ω–∫–∏!
    –ò–º–µ–Ω–Ω–æ –∑–¥–µ—Å—å –º—ã —Ç—Ä–∞—Ç–∏–º —Ç–æ–∫–µ–Ω—ã Max –¥–ª—è Sber500!
    """

    count = int(args[0]) if args else 10
    filter_type = args[1] if len(args) > 1 else 'synthetic'

    if count > 100:
        await update.message.reply_text("‚ùå –ú–∞–∫—Å–∏–º—É–º 100 –∞–Ω–∫–µ—Ç –∑–∞ —Ä–∞–∑")
        return

    # Get anketas
    anketas = self.db.get_anketas_for_batch_audit(
        user_id=user_id,
        count=count,
        filter_type=filter_type
    )

    await update.message.reply_text(
        f"üîç –ó–∞–ø—É—Å–∫–∞—é batch –∞—É–¥–∏—Ç {count} –∞–Ω–∫–µ—Ç ({filter_type})...\n"
        f"üíé –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è GigaChat Max –¥–ª—è —Ç–æ—á–Ω–æ–π –æ—Ü–µ–Ω–∫–∏\n"
        f"‚è± –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è: ~{count * 20} —Å–µ–∫—É–Ω–¥\n"
        f"üí∞ –¢–æ–∫–µ–Ω–æ–≤ Max: ~{count * 2000:,}"
    )

    # Validate with GigaChat Max
    from agents.anketa_validator import AnketaValidator

    validator = AnketaValidator(
        llm_provider='gigachat',  # ‚Üê MAX –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏!
        db=self.db
    )

    results = []
    scores = []

    for i, anketa in enumerate(anketas):
        # Validate
        result = await validator.validate(anketa['interview_data'])

        # Save result
        self.db.save_validation_result(
            anketa_id=anketa['anketa_id'],
            validation_result=result
        )

        results.append({
            'anketa_id': anketa['anketa_id'],
            'score': result['score'],
            'quality_target': anketa.get('quality_target'),
            'status': 'approved' if result['can_proceed'] else 'rejected'
        })
        scores.append(result['score'])

        # Progress every 5
        if (i + 1) % 5 == 0:
            await update.message.reply_text(
                f"‚è≥ –ü—Ä–æ–≥—Ä–µ—Å—Å: {i+1}/{len(anketas)}\n"
                f"–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞: {sum(scores[:i+1]) / (i+1):.1f}/10"
            )

    # Summary
    avg_score = sum(scores) / len(scores)
    approved = sum(1 for r in results if r['status'] == 'approved')

    summary = (
        f"‚úÖ Batch –∞—É–¥–∏—Ç –∑–∞–≤–µ—Ä—à—ë–Ω!\n\n"
        f"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n"
        f"‚Ä¢ –í—Å–µ–≥–æ –∞–Ω–∫–µ—Ç: {len(results)}\n"
        f"‚Ä¢ –°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞: {avg_score:.1f}/10\n"
        f"‚Ä¢ –û–¥–æ–±—Ä–µ–Ω–æ: {approved}/{len(results)} ({approved/len(results)*100:.1f}%)\n"
        f"‚Ä¢ Min: {min(scores):.1f}/10\n"
        f"‚Ä¢ Max: {max(scores):.1f}/10\n\n"
        f"üí∞ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤ Max: ~{len(results) * 2000:,}\n\n"
        f"üìã –¢–æ–ø-5 –∞–Ω–∫–µ—Ç:\n"
    )

    top5 = sorted(results, key=lambda x: x['score'], reverse=True)[:5]
    for r in top5:
        summary += f"‚Ä¢ {r['anketa_id']}: {r['score']:.1f}/10\n"

    await update.message.reply_text(summary)

    # Send CSV file
    await self._send_batch_results_csv(
        chat_id=update.effective_chat.id,
        results=results,
        context=context
    )
```

#### –ö–æ–º–∞–Ω–¥–∞ 3: `/corpus_stats`

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```
/corpus_stats
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
```python
async def corpus_stats(self, update, context):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–æ—Ä–ø—É—Å–∞ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∫–µ—Ç"""

    stats = self.db.get_corpus_statistics()

    message = (
        f"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä–ø—É—Å–∞ –∞–Ω–∫–µ—Ç\n\n"
        f"**–í—Å–µ–≥–æ –∞–Ω–∫–µ—Ç:**\n"
        f"‚Ä¢ –°–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö: {stats['synthetic_count']}\n"
        f"‚Ä¢ –†–µ–∞–ª—å–Ω—ã—Ö: {stats['real_count']}\n"
        f"‚Ä¢ –û–±—â–µ–µ: {stats['total_count']}\n\n"
        f"**–ü—Ä–æ–∞—É–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö:**\n"
        f"‚Ä¢ –° –æ—Ü–µ–Ω–∫–æ–π: {stats['audited_count']}\n"
        f"‚Ä¢ –°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞: {stats['avg_score']:.1f}/10\n\n"
        f"**–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–∞—á–µ—Å—Ç–≤—É:**\n"
        f"‚Ä¢ Low (4-6): {stats['low_count']}\n"
        f"‚Ä¢ Medium (6-8): {stats['medium_count']}\n"
        f"‚Ä¢ High (8-10): {stats['high_count']}\n\n"
        f"üí∞ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤ Max:** ~{stats['audited_count'] * 2000:,}"
    )

    await update.message.reply_text(message)
```

---

### Phase 3: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (30 –º–∏–Ω—É—Ç)

**Migration:** `add_synthetic_anketa_fields.sql`

```sql
-- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –¥–ª—è —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∫–µ—Ç
ALTER TABLE sessions
ADD COLUMN IF NOT EXISTS synthetic BOOLEAN DEFAULT FALSE,
ADD COLUMN IF NOT EXISTS quality_target VARCHAR(20),
ADD COLUMN IF NOT EXISTS validation_score FLOAT,
ADD COLUMN IF NOT EXISTS validation_result JSONB;

-- Index –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
CREATE INDEX IF NOT EXISTS idx_sessions_synthetic
ON sessions(synthetic) WHERE synthetic = TRUE;

CREATE INDEX IF NOT EXISTS idx_sessions_quality_target
ON sessions(quality_target) WHERE quality_target IS NOT NULL;

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–æ—Ä–ø—É—Å–∞
CREATE OR REPLACE FUNCTION get_corpus_statistics()
RETURNS TABLE (
    synthetic_count BIGINT,
    real_count BIGINT,
    total_count BIGINT,
    audited_count BIGINT,
    avg_score FLOAT,
    low_count BIGINT,
    medium_count BIGINT,
    high_count BIGINT
) AS $$
BEGIN
    RETURN QUERY
    SELECT
        COUNT(*) FILTER (WHERE synthetic = TRUE) as synthetic_count,
        COUNT(*) FILTER (WHERE synthetic = FALSE OR synthetic IS NULL) as real_count,
        COUNT(*) as total_count,
        COUNT(*) FILTER (WHERE validation_score IS NOT NULL) as audited_count,
        AVG(validation_score) as avg_score,
        COUNT(*) FILTER (WHERE validation_score >= 4 AND validation_score < 6) as low_count,
        COUNT(*) FILTER (WHERE validation_score >= 6 AND validation_score < 8) as medium_count,
        COUNT(*) FILTER (WHERE validation_score >= 8) as high_count
    FROM sessions;
END;
$$ LANGUAGE plpgsql;

COMMENT ON COLUMN sessions.synthetic IS '–§–ª–∞–≥ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–æ–π –∞–Ω–∫–µ—Ç—ã (—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π AI)';
COMMENT ON COLUMN sessions.quality_target IS '–¶–µ–ª–µ–≤–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ: low/medium/high';
COMMENT ON COLUMN sessions.validation_score IS '–û—Ü–µ–Ω–∫–∞ AnketaValidator (0-10)';
COMMENT ON COLUMN sessions.validation_result IS '–ü–æ–ª–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (JSON)';
```

**–ú–µ—Ç–æ–¥—ã –≤ GrantServiceDatabase:**

```python
def save_synthetic_anketa(
    self,
    user_id: int,
    anketa_data: Dict,
    quality_target: str
) -> str:
    """
    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫—É—é –∞–Ω–∫–µ—Ç—É

    Returns:
        anketa_id: ID —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∞–Ω–∫–µ—Ç—ã
    """

def get_anketas_for_batch_audit(
    self,
    user_id: int,
    count: int = 10,
    filter_type: str = 'synthetic'
) -> List[Dict]:
    """
    –ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∫–µ—Ç—ã –¥–ª—è batch –∞—É–¥–∏—Ç–∞

    Args:
        filter_type: 'synthetic', 'real', 'all'
    """

def save_validation_result(
    self,
    anketa_id: str,
    validation_result: Dict
) -> bool:
    """
    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ –ë–î
    """

def get_corpus_statistics(self) -> Dict:
    """
    –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–æ—Ä–ø—É—Å–∞
    """
```

---

### Phase 4: –û—Ç—á—ë—Ç—ã –∏ —ç–∫—Å–ø–æ—Ä—Ç (30 –º–∏–Ω—É—Ç)

**–°–æ–∑–¥–∞—Ç—å:** `scripts/export_corpus_stats.py`

```python
#!/usr/bin/env python3
"""Export corpus statistics to CSV"""

import csv
import sys
from pathlib import Path
sys.path.insert(0, str(Path(__file__).parent.parent))

from data.database.models import GrantServiceDatabase

def export_corpus_to_csv():
    """–≠–∫—Å–ø–æ—Ä—Ç –∫–æ—Ä–ø—É—Å–∞ –≤ CSV –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"""

    db = GrantServiceDatabase()

    anketas = db.get_all_synthetic_anketas()

    output_file = Path(__file__).parent.parent / "reports" / "synthetic_corpus.csv"

    with open(output_file, 'w', encoding='utf-8', newline='') as f:
        writer = csv.DictWriter(f, fieldnames=[
            'anketa_id',
            'quality_target',
            'validation_score',
            'status',
            'project_name',
            'region',
            'budget',
            'created_at'
        ])

        writer.writeheader()
        for anketa in anketas:
            writer.writerow({
                'anketa_id': anketa['anketa_id'],
                'quality_target': anketa.get('quality_target'),
                'validation_score': anketa.get('validation_score'),
                'status': 'approved' if anketa.get('validation_score', 0) >= 7 else 'needs_work',
                'project_name': anketa['interview_data'].get('project_name'),
                'region': anketa['interview_data'].get('region'),
                'budget': anketa['interview_data'].get('budget'),
                'created_at': anketa['created_at']
            })

    print(f"‚úÖ Exported {len(anketas)} anketas to {output_file}")

if __name__ == "__main__":
    export_corpus_to_csv()
```

---

## üìã WORKFLOW –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–æ–∑–¥–∞—Ç—å –∫–æ—Ä–ø—É—Å –∏–∑ 100 –∞–Ω–∫–µ—Ç

```
Telegram:
1. /generate_synthetic_anketa 100 medium
   ‚Üí –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 100 –∞–Ω–∫–µ—Ç –∑–∞ ~5 –º–∏–Ω—É—Ç
   ‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç GigaChat Lite (~150K —Ç–æ–∫–µ–Ω–æ–≤)

2. /batch_audit_anketas 100
   ‚Üí –ê—É–¥–∏—Ç–∏—Ä—É–µ—Ç –≤—Å–µ 100 –∞–Ω–∫–µ—Ç –∑–∞ ~30 –º–∏–Ω—É—Ç
   ‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç GigaChat Max (~200K —Ç–æ–∫–µ–Ω–æ–≤) ‚úÖ

3. /corpus_stats
   ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
     ‚Ä¢ 100 —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∫–µ—Ç
     ‚Ä¢ –°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞: 7.2/10
     ‚Ä¢ 73% –æ–¥–æ–±—Ä–µ–Ω–æ
     ‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ 200K —Ç–æ–∫–µ–Ω–æ–≤ Max

4. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
   python scripts/export_corpus_stats.py
   ‚Üí –ü–æ–ª—É—á–∏—Ç—å CSV —Ñ–∞–π–ª
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –∫–∞—á–µ—Å—Ç–≤

```
Telegram:
1. /generate_synthetic_anketa 30 low
2. /generate_synthetic_anketa 40 medium
3. /generate_synthetic_anketa 30 high

4. /batch_audit_anketas 100

–†–µ–∑—É–ª—å—Ç–∞—Ç: –í–∏–¥–∏–º –∫–∞–∫ AnketaValidator –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ –∫–∞—á–µ—Å—Ç–≤–∞
```

---

## üí∞ –≠–ö–û–ù–û–ú–ò–ö–ê –¢–û–ö–ï–ù–û–í

### 1 –ø—Ä–æ–≥–æ–Ω (100 –∞–Ω–∫–µ—Ç):
```
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è:  150K Lite tokens  (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –∏–∑ –ø–æ–¥–ø–∏—Å–∫–∏)
–ê—É–¥–∏—Ç:      200K Max tokens   (10% –æ—Ç –ª–∏–º–∏—Ç–∞)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ò–¢–û–ì–û:      200K Max tokens –ø–æ—Ç—Ä–∞—á–µ–Ω–æ ‚úÖ
```

### 5 –ø—Ä–æ–≥–æ–Ω–æ–≤ (500 –∞–Ω–∫–µ—Ç):
```
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è:  750K Lite tokens
–ê—É–¥–∏—Ç:      1,000K Max tokens (50% –æ—Ç –ª–∏–º–∏—Ç–∞)
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ò–¢–û–ì–û:      1M Max tokens –ø–æ—Ç—Ä–∞—á–µ–Ω–æ ‚úÖ‚úÖ‚úÖ
```

**–î–ª—è Sber500:** –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ 1M —Ç–æ–∫–µ–Ω–æ–≤ Max! üéØ

---

## üéì –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –ö–û–†–ü–£–°–ê

### 1. Reinforcement Learning Dataset
```python
# –ü–∞—Ä—ã (anketa, score) –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
corpus = [
    (anketa_1, 8.5),  # high quality
    (anketa_2, 7.2),  # medium
    (anketa_3, 5.1),  # low
    ...
]

# Train reward model
reward_model = train_reward_model(corpus)
```

### 2. Quality Benchmarking
```python
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫ –º–µ–Ω—è–µ—Ç—Å—è –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ü–µ–Ω–æ–∫
results = {
    'low_target': avg_score_for_low,    # Expected: 5.5/10
    'medium_target': avg_score_for_medium,  # Expected: 7.0/10
    'high_target': avg_score_for_high   # Expected: 8.5/10
}
```

### 3. Edge Cases Testing
```python
# –ù–∞–π—Ç–∏ –∫—Ä–∞–π–Ω–∏–µ —Å–ª—É—á–∞–∏
edge_cases = [
    anketa for anketa in corpus
    if anketa.score < 4.0 or anketa.score > 9.5
]
```

---

## üìä –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê

### Must Have:
- [x] 100 —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∫–µ—Ç —Å–æ–∑–¥–∞–Ω–æ
- [x] 100 –∞–Ω–∫–µ—Ç –ø—Ä–æ–∞—É–¥–∏—Ä–æ–≤–∞–Ω–æ
- [x] **‚â•200K —Ç–æ–∫–µ–Ω–æ–≤ Max –ø–æ—Ç—Ä–∞—á–µ–Ω–æ** ‚úÖ
- [x] –°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞ ‚â•6.0/10
- [x] CSV —ç–∫—Å–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç

### Nice to Have:
- [ ] 500 –∞–Ω–∫–µ—Ç –≤ –∫–æ—Ä–ø—É—Å–µ
- [ ] 1M —Ç–æ–∫–µ–Ω–æ–≤ Max –ø–æ—Ç—Ä–∞—á–µ–Ω–æ
- [ ] –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ü–µ–Ω–æ–∫ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å target quality
- [ ] –ê–Ω–∞–ª–∏–∑ —Ç–æ–≥–æ, –∫–∞–∫–∏–µ –ø–æ–ª—è –≤–ª–∏—è—é—Ç –Ω–∞ –æ—Ü–µ–Ω–∫—É

---

## üöÄ TIMELINE

### Day 1 (—Å–µ–≥–æ–¥–Ω—è):
- [ ] Phase 1: AnketaSyntheticGenerator (1 —á–∞—Å)
- [ ] Phase 2: Telegram Commands (1 —á–∞—Å)
- [ ] Phase 3: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (30 –º–∏–Ω)
- [ ] Phase 4: –û—Ç—á—ë—Ç—ã (30 –º–∏–Ω)
- **TOTAL: 3 —á–∞—Å–∞**

### Day 2:
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 100 –∞–Ω–∫–µ—Ç
- [ ] Batch –∞—É–¥–∏—Ç 100 –∞–Ω–∫–µ—Ç
- [ ] –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á—ë—Ç –≤ Sber500 —á–∞—Ç

### Days 3-7:
- [ ] –ï—â—ë 4 –ø—Ä–æ–≥–æ–Ω–∞ –ø–æ 100 –∞–Ω–∫–µ—Ç
- [ ] –î–æ—Å—Ç–∏—á—å 500 –∞–Ω–∫–µ—Ç –≤ –∫–æ—Ä–ø—É—Å–µ
- [ ] –ü–æ—Ç—Ä–∞—Ç–∏—Ç—å 1M —Ç–æ–∫–µ–Ω–æ–≤ Max
- [ ] –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –¥–ª—è Sber500

---

## üéØ –°–í–Ø–ó–¨ –° ITERATION 37

**Iteration 37:** Two-Stage QA Pipeline
- GATE 1: AnketaValidator validates JSON
- GATE 2: AuditorAgent audits TEXT

**Iteration 38:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç GATE 1!
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ JSON –∞–Ω–∫–µ—Ç—ã
- –í–∞–ª–∏–¥–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ AnketaValidator (GATE 1)
- **–ò–º–µ–Ω–Ω–æ –∑–¥–µ—Å—å —Ç—Ä–∞—Ç–∏–º —Ç–æ–∫–µ–Ω—ã Max!**

**–°–∏–Ω–µ—Ä–≥–∏—è:**
- Iteration 37 —Å–æ–∑–¥–∞–ª–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (AnketaValidator)
- Iteration 38 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ –≤ –º–∞—Å—Å–æ–≤–æ–º –º–∞—Å—à—Ç–∞–±–µ
- –î–æ–∫–∞–∑—ã–≤–∞–µ–º —Ü–µ–Ω–Ω–æ—Å—Ç—å GigaChat Max –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞

---

## üìù –§–ê–ô–õ–´ –î–õ–Ø –°–û–ó–î–ê–ù–ò–Ø

```
agents/
  anketa_synthetic_generator.py        (~200 lines)

telegram-bot/handlers/
  anketa_management_handler.py         (+150 lines)

data/database/migrations/
  add_synthetic_anketa_fields.sql      (~50 lines)

scripts/
  export_corpus_stats.py               (~100 lines)

reports/
  synthetic_corpus.csv                 (generated)
  corpus_statistics.md                 (generated)
```

**TOTAL:** ~500 lines of code

---

## ‚úÖ CHECKLIST

### Pre-requisites:
- [x] Iteration 37 complete (AnketaValidator exists)
- [x] GigaChat Max credentials configured
- [x] Database has approved anketas as templates
- [ ] GigaChat Lite provider added to UnifiedLLMClient

### Development:
- [ ] Create AnketaSyntheticGenerator
- [ ] Add /generate_synthetic_anketa command
- [ ] Add /batch_audit_anketas command
- [ ] Add /corpus_stats command
- [ ] Database migration
- [ ] Export script

### Testing:
- [ ] Generate 1 anketa (smoke test)
- [ ] Generate 10 anketas
- [ ] Batch audit 10 anketas
- [ ] Verify tokens spent (check GigaChat dashboard)
- [ ] Export CSV works

### Production:
- [ ] Generate 100 anketas
- [ ] Batch audit 100 anketas
- [ ] Verify ~200K Max tokens spent
- [ ] Send report to Sber500

---

## üéâ EXPECTED OUTCOME

**–î–ª—è Sber500:**
```
üìä –û—Ç—á—ë—Ç –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é GigaChat Max

–ó–∞ –Ω–µ–¥–µ–ª—é:
‚Ä¢ –°–æ–∑–¥–∞–Ω–æ –∞–Ω–∫–µ—Ç: 500
‚Ä¢ –ó–∞–ø—Ä–æ—Å–æ–≤ –∫ GigaChat Max: 500+
‚Ä¢ –¢–æ–∫–µ–Ω–æ–≤ Max –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: 1,000,000
‚Ä¢ –¶–µ–ª—å: Quality assurance –¥–ª—è –≥—Ä–∞–Ω—Ç–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫

–î–µ—Ç–∞–ª–∏:
- AnketaValidator —Å GigaChat Max –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç
  —Ç–æ—á–Ω—É—é –æ—Ü–µ–Ω–∫—É –∫–∞—á–µ—Å—Ç–≤–∞ –∞–Ω–∫–µ—Ç (7-9/10)
- –°–æ–∑–¥–∞–Ω –∫–æ—Ä–ø—É—Å –∏–∑ 500 –∞–Ω–∫–µ—Ç –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
- –î–æ–∫–∞–∑–∞–Ω–∞ —Ü–µ–Ω–Ω–æ—Å—Ç—å Max –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞
```

**–î–ª—è –ø—Ä–æ–µ–∫—Ç–∞:**
- ‚úÖ –ö–æ—Ä–ø—É—Å –∏–∑ 500 –∞–Ω–∫–µ—Ç –¥–ª—è RL
- ‚úÖ Benchmark –¥–ª—è AnketaValidator
- ‚úÖ –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
- ‚úÖ Edge cases –Ω–∞–π–¥–µ–Ω—ã

**–î–ª—è –±—É—Ç–∫–µ–º–ø–∞:**
- ‚úÖ 1M —Ç–æ–∫–µ–Ω–æ–≤ Max –ø–æ—Ç—Ä–∞—á–µ–Ω–æ
- ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑–∞–Ω–æ
- ‚úÖ –ü–æ–≤—ã—à–∞–µ—Ç —à–∞–Ω—Å—ã –Ω–∞ —Ç–æ–ø-50!

---

**Status:** üìã READY TO START
**Priority:** üî• CRITICAL
**Estimated time:** 3 hours development + 1 week execution
**Impact:** HIGH (Sber500 selection!)

**–°–æ–∑–¥–∞–Ω–æ:** 2025-10-25
**Iteration:** 38 - Synthetic Corpus Generator
