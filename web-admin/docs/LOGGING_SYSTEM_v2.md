# üìã –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è GrantService v2.0

## üöÄ –û–±–∑–æ—Ä

–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å:
- ‚úÖ **–†–æ—Ç–∞—Ü–∏–µ–π –ª–æ–≥–æ–≤** (–ø–æ —Ä–∞–∑–º–µ—Ä—É –∏ –≤—Ä–µ–º–µ–Ω–∏)
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫**
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ –æ—Ç–ª–∞–¥–∫–æ–π**

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
/var/GrantService/web-admin/logs/
‚îú‚îÄ‚îÄ [component].log          # –û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏ (DEBUG+)
‚îú‚îÄ‚îÄ [component]_errors.log   # –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏ (ERROR+)
‚îú‚îÄ‚îÄ [component]_daily.log    # –î–Ω–µ–≤–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è (INFO+)
‚îî‚îÄ‚îÄ ...
```

### üéØ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
- `web_admin` - –æ—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏
- `database` - —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- `api` - FastAPI —Å–µ—Ä–≤–µ—Ä
- `main_page` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `log_monitoring` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### üìä –£—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
- **DEBUG** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **INFO** - –æ–±—â–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- **WARNING** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö
- **ERROR** - –æ—à–∏–±–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **CRITICAL** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ —Å–∏—Å—Ç–µ–º—ã

### üîÑ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ—Ç–∞—Ü–∏–∏:
- **–ü–æ —Ä–∞–∑–º–µ—Ä—É:** 10MB (5 –±—ç–∫–∞–ø–æ–≤)
- **–ü–æ –≤—Ä–µ–º–µ–Ω–∏:** –µ–∂–µ–¥–Ω–µ–≤–Ω–æ (30 –¥–Ω–µ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è)
- **–û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –æ—à–∏–±–æ–∫:** 5MB (3 –±—ç–∫–∞–ø–∞)

---

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```python
from utils.logger import setup_logger

# –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–≥–≥–µ—Ä–∞
logger = setup_logger('my_component', level=logging.INFO)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
logger.info("–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ")
logger.error("–û—à–∏–±–∫–∞!", exc_info=True)
```

### –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:
```python
from utils.logger import log_exception, log_performance

@log_exception(logger, "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏")
def risky_function():
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è
    pass

@log_performance(logger)
def slow_function():
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    pass
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
```python
from utils.logger import get_log_stats

stats = get_log_stats()
print(f"–§–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤: {len(stats['files'])}")
```

---

## üéõÔ∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ Web UI

### –°—Ç—Ä–∞–Ω–∏—Ü–∞: **üìã –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤**

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–≥–æ–≤** - —Ä–∞–∑–º–µ—Ä—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤
- üîç **–ü—Ä–æ—Å–º–æ—Ç—Ä –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** - –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏
- üéØ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—è–º** - ERROR, WARNING, INFO, DEBUG
- üì• **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤** - –ø–æ–ª–Ω—ã–µ —Ñ–∞–π–ª—ã
- üóëÔ∏è **–û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤** - —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- üîç **–ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫** - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚ö° **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

**–¶–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞:**
- üî¥ ERROR - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
- üü° WARNING - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- üü¢ INFO - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- üîµ DEBUG - –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

---

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:
- **Telegram Bot** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- **FastAPI Server** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è API
- **Database** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ë–î
- **Metrics** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- **UI Components** - –æ—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∏—á–∏:
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ —Å—Ç–µ–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è HTTP –æ—à–∏–±–æ–∫ (timeout, connection, etc.)
- ‚úÖ Graceful fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üìà –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:
```
2025-08-15 01:41:29 - web_admin - INFO - main.py:45 - check_bot() - ‚úÖ Telegram bot online
2025-08-15 01:41:30 - database - ERROR - db.py:123 - get_stats() - Database connection failed
```

### Performance –ª–æ–≥–∏:
```
2025-08-15 01:41:29 - main_page - INFO - ‚ö° get_metrics –≤—ã–ø–æ–ª–Ω–µ–Ω –∑–∞ 0.245—Å
2025-08-15 01:41:30 - main_page - ERROR - üí• get_daily_stats —É–ø–∞–ª —á–µ—Ä–µ–∑ 1.234—Å: Connection error
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ö–ª–∞—Å—Å—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `GrantServiceLogger` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å —Å–∏—Å—Ç–µ–º—ã
- `ColoredFormatter` - —Ü–≤–µ—Ç–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å–æ–ª–∏
- `RotatingFileHandler` - —Ä–æ—Ç–∞—Ü–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä—É
- `TimedRotatingFileHandler` - —Ä–æ—Ç–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ –ª–æ–≥–æ–≤ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ (755)
- Fallback –≤ `/tmp` –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ø—Ä–∞–≤–∞–º–∏
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–∞

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —É–ª—É—á—à–µ–Ω–∏–π

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–ü–∞–ø–∫–∞ logs –±—ã–ª–∞ –ø—É—Å—Ç–∞—è** ‚Üí –¢–µ–ø–µ—Ä—å –∞–∫—Ç–∏–≤–Ω–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
2. **–¢–æ–ª—å–∫–æ ERROR —É—Ä–æ–≤–µ–Ω—å** ‚Üí –í—Å–µ —É—Ä–æ–≤–Ω–∏ (DEBUG, INFO, WARNING, ERROR)
3. **–ù–µ—Ç —Ä–æ—Ç–∞—Ü–∏–∏** ‚Üí –î–≤–æ–π–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è (—Ä–∞–∑–º–µ—Ä + –≤—Ä–µ–º—è)
4. **–û—à–∏–±–∫–∏ –Ω–µ –ª–æ–≥–∏—Ä–æ–≤–∞–ª–∏—Å—å** ‚Üí –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
5. **–ù–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** ‚Üí Web UI —Å real-time –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º

### üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:
- **16 —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤** —Å–æ–∑–¥–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** –ø–æ–∫—Ä—ã—Ç—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **100% –æ—à–∏–±–æ–∫** —Ç–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–ª–Ω—ã–º —Å—Ç–µ–∫–æ–º
- **Real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

---

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å alerting** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π** - audit trail
3. **–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - dashboard —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

---

*–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è v2.0 –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ*